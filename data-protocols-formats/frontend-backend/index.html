<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.99.1"><meta name=robots content="index, follow"><link rel="shortcut icon" href=../../favicons/favicon.ico><link rel=apple-touch-icon href=../../favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=../../favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=../../favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=../../favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=../../favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=../../favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=../../favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=../../favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=../../favicons/android-192x192.png sizes=192x192><title>Frontend and backend protocols |</title><meta name=description content="Vertica uses a message-based protocol for communication between frontends and backends (clients and servers). The protocol is supported over TCP/IP sockets. This document describes version 3.14 of the protocol.
For purposes of the protocol, the terms &amp;ldquo;backend&amp;rdquo; and &amp;ldquo;server&amp;rdquo; are interchangeable; likewise &amp;ldquo;frontend&amp;rdquo; and &amp;ldquo;client&amp;rdquo; are interchangeable. See vertica-python for a frontend implementation reference of the protocol.
Questions? Contact the team at vertica-client@microfocus.com.
Overview The protocol has separate phases for startup and normal operation."><meta property="og:title" content="Frontend and backend protocols"><meta property="og:description" content="Vertica uses a message-based protocol for communication between frontends and backends (clients and servers). The protocol is supported over TCP/IP sockets. This document describes version 3.14 of the protocol.
For purposes of the protocol, the terms &ldquo;backend&rdquo; and &ldquo;server&rdquo; are interchangeable; likewise &ldquo;frontend&rdquo; and &ldquo;client&rdquo; are interchangeable. See vertica-python for a frontend implementation reference of the protocol.
Questions? Contact the team at vertica-client@microfocus.com.
Overview The protocol has separate phases for startup and normal operation."><meta property="og:type" content="article"><meta property="og:url" content="/data-protocols-formats/frontend-backend/"><meta property="article:section" content="data-protocols-formats"><meta itemprop=name content="Frontend and backend protocols"><meta itemprop=description content="Vertica uses a message-based protocol for communication between frontends and backends (clients and servers). The protocol is supported over TCP/IP sockets. This document describes version 3.14 of the protocol.
For purposes of the protocol, the terms &ldquo;backend&rdquo; and &ldquo;server&rdquo; are interchangeable; likewise &ldquo;frontend&rdquo; and &ldquo;client&rdquo; are interchangeable. See vertica-python for a frontend implementation reference of the protocol.
Questions? Contact the team at vertica-client@microfocus.com.
Overview The protocol has separate phases for startup and normal operation."><meta itemprop=wordCount content="10843"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Frontend and backend protocols"><meta name=twitter:description content="Vertica uses a message-based protocol for communication between frontends and backends (clients and servers). The protocol is supported over TCP/IP sockets. This document describes version 3.14 of the protocol.
For purposes of the protocol, the terms &ldquo;backend&rdquo; and &ldquo;server&rdquo; are interchangeable; likewise &ldquo;frontend&rdquo; and &ldquo;client&rdquo; are interchangeable. See vertica-python for a frontend implementation reference of the protocol.
Questions? Contact the team at vertica-client@microfocus.com.
Overview The protocol has separate phases for startup and normal operation."><link rel=preload href=../../scss/main.min.8a6ed667b3d1bd12fba7ff44e1fe8c839f35d62b1dd330530f402a195a4dac52.css as=style><link href=../../scss/main.min.8a6ed667b3d1bd12fba7ff44e1fe8c839f35d62b1dd330530f402a195a4dac52.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<link rel=stylesheet href=../../css/prism.css></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=../../><span class="navbar-brand__logo navbar-logo"><svg width="398" height="142" viewBox="0 0 398 142" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMinYMin"><title>Vertica-OT-White</title><g id="Outlined" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Logos---Outlined-(Dark-Bg)" transform="translate(-970.000000, -645.000000)" fill="#fff" fill-rule="nonzero"><path d="M979.5728 750.5824H982.9136V760.912C983.7328 759.8368 984.68 759.0048 985.7552 758.416 986.8304 757.8272 988.0976 757.5328 989.5568 757.5328 990.9648 757.5328 992.2 757.7888 993.2624 758.3008 994.3248 758.8128 995.208 759.5296 995.912 760.4512 996.616 761.3728 997.1408 762.4672 997.4864 763.7344S998.0048 766.4032 998.0048 767.9392C998.0048 769.5776 997.8 771.056 997.3904 772.3744S996.392 774.8128 995.624 775.7344C994.856 776.656 993.928 777.3664 992.84 777.8656 991.752 778.3648 990.5296 778.6144 989.1728 778.6144 988.0208 778.6144 986.9008 778.3776 985.8128 777.904 984.7248 777.4304 983.7456 776.6176 982.8752 775.4656V778H979.5728V750.5824zM982.8752 768.6304C982.8752 769.9104 983.0224 771.0048 983.3168 771.9136 983.6112 772.8224 984.0144 773.5712 984.5264 774.16 985.0384 774.7488 985.6528 775.1776 986.3696 775.4464 987.0864 775.7152 987.8672 775.8496 988.712 775.8496 989.5312 775.8496 990.2928 775.7088 990.9968 775.4272S992.3088 774.6912 992.8208 774.064C993.3328 773.4368 993.736 772.624 994.0304 771.6256 994.3248 770.6272 994.472 769.4112 994.472 767.9776 994.472 766.5184 994.312 765.296 993.992 764.3104 993.672 763.3248 993.256 762.5376 992.744 761.9488 992.232 761.36 991.6496 760.9376 990.9968 760.6816S989.672 760.2976 988.9808 760.2976C988.1104 760.2976 987.304 760.4448 986.5616 760.7392S985.1728 761.4688 984.6224 762.0448C984.072 762.6208 983.6432 763.3504 983.336 764.2336S982.8752 766.1344 982.8752 767.2864V768.6304zm19.5456 13.5936C1003.1376 782.48 1003.8544 782.608 1004.5712 782.608 1005.3904 782.608 1006.024 782.3968 1006.472 781.9744 1006.92 781.552 1007.3616 780.7648 1007.7968 779.6128L1008.6032 777.5008 1000.1936 758.1472H1004.072L1010.3312 773.7376 1016.0528 758.1472H1019.7392L1011.0608 779.8816C1010.7024 780.7776 1010.344 781.5648 1009.9856 782.2432 1009.6272 782.9216 1009.2304 783.504 1008.7952 783.9904S1007.8416 784.8416 1007.24 785.0848 1005.9024 785.4496 1005.032 785.4496C1004.4176 785.4496 1003.8672 785.4112 1003.3808 785.3344 1002.8944 785.2576 1002.3568 785.1168 1001.768 784.912L1002.4208 782.224zm68.6254-26.884714c5.90264000000002.0 10.10727 4.33928500000002 10.10727 12.133928C1081.15347 772.294643 1079.37459 779.848214 1070.72277 779.848214 1067.65017 779.848214 1065.22442 778.160714 1064.65842 777.196429V787H1057.5429V755.901786H1064.73927V757.991071C1065.38614 756.946429 1067.56931 755.339286 1071.0462 755.339286zm-28.13861.0C1052.77228 755.901786 1054.95545 763.294643 1054.95545 767.553571 1054.95545 773.5 1051.39769 779.928571 1042.01815 779.928571 1035.22607 779.928571 1029 776.232143 1029 767.553571 1029 760.401786 1033.68977 754.857143 1042.90759 755.339286zM1104.60231 758.392857C1107.75578 761.6875 1107.91749 766.267857 1107.99835 768.919643H1090.61386C1090.61386 771.8125 1092.31188 774.785714 1096.19307 774.785714S1101.44884 772.294643 1102.33828 770.6875L1107.67492 773.258929C1107.02805 774.625 1104.92574 779.928571 1095.62706 779.928571c-7.19637000000012.0-12.20957-4.25892800000008-12.20957-11.973214.0-5.625 2.91088999999988-12.616071 12.4521499999998-12.616071C1097.32508 755.339286 1101.44884 755.178571 1104.60231 758.392857zM1170.17822 758.3125C1173.33168 761.607143 1173.4934 766.1875 1173.57426 768.839286H1156.27063C1156.18977 771.732143 1157.72607 774.705357 1161.5264 774.705357 1165.40759 774.705357 1166.5396 772.214286 1167.42904 770.607143L1172.84653 773.258929 1171.47195 775.267857C1170.17822 777.035714 1167.83333 779.848214 1160.9604 779.848214 1153.76403 779.848214 1148.9934 775.589286 1148.9934 767.875 1148.9934 762.25 1151.90429 755.258929 1161.44554 755.258929L1161.67122 755.258217C1163.29153 755.251276 1167.17492 755.251276 1170.17822 758.3125zM1206.88779 751V755.982143H1211.57756V760.803571H1206.88779V771.169643C1206.80693 772.616071 1206.80693 773.821429 1208.74752 773.821429L1211.25413 773.741071V779.125C1209.79868 779.366071 1208.82838 779.526786 1207.53465 779.526786 1205.02805 779.526786 1202.35974 779.366071 1200.82343 777.196429 1199.85314 775.830357 1199.77228 774.142857 1199.77228 771.892857V760.723214H1195.40594L1198.64026 755.901786H1199.77228V751H1206.88779zM1143.17162 751V755.901786H1150.5297L1147.29538 760.723214H1143.09076v10.446429C1143.0099 772.616071 1143.0099 773.821429 1144.9505 773.821429L1147.4571 773.741071V779.125C1145.92079 779.366071 1145.03135 779.526786 1143.73762 779.526786 1141.31188 779.526786 1138.56271 779.366071 1137.0264 777.196429 1136.05611 775.830357 1135.97525 774.142857 1135.97525 771.892857V751H1143.17162zM1125.14026 755.339286C1126.59571 755.339286 1128.21287 755.580357 1129.42574 756.223214 1131.93234 757.508929 1132.66007 759.598214 1132.66007 763.294643V779.366071H1125.4637V766.107143C1125.4637 764.017857 1125.38284 763.214286 1125.14026 762.571429 1124.57426 761.285714 1123.36139 760.803571 1121.90594 760.803571 1118.50302 760.803571 1118.21341 763.224981 1118.18876 765.914004L1118.18676 766.290737 1118.18647 779.366071H1111.07096V755.901786H1118.26733V757.991071C1118.99505 757.267857 1119.39934 756.705357 1120.69307 756.142857 1121.82508 755.660714 1123.36139 755.339286 1125.14026 755.339286zM1180.28548 755.982143 1184.08581 761.205357 1187.56271 755.982143H1195.64851L1188.29043 767.071429 1197.18482 779.366071H1189.01815L1184.32838 772.857143 1180.0429 779.366071H1171.9571L1180.20462 767.071429 1172.19967 755.982143H1180.28548zM1041.533 760.883929C1039.59241 760.964286 1038.37954 761.607143 1037.40924 763.053571 1036.5198 764.339286 1036.19637 765.946429 1036.19637 767.553571 1036.19637 771.169643 1038.05611 774.464286 1042.01815 774.464286 1045.89934 774.464286 1047.75908 771.410714 1047.75908 767.875 1047.75908 765.303571 1047.11221 763.375 1045.73762 762.169643 1044.28218 760.883929 1042.58416 760.803571 1041.533 760.883929zM1069.59076 760.723214C1068.29703 760.723214 1066.92244 761.205357 1065.95215 762.491071 1064.90099 763.696429 1064.4967 765.544643 1064.4967 767.633929 1064.4967 770.366071 1065.30528 772.053571 1066.19472 773.017857 1067.0033 773.901786 1068.21617 774.464286 1069.42904 774.464286 1072.90594 774.464286 1074.44224 770.928571 1074.44224 767.473214 1074.44224 764.580357 1073.55281 761.526786 1070.64191 760.883929 1070.23762 760.803571 1069.91419 760.723214 1069.59076 760.723214zM1095.70792 760C1094.0099 760 1092.79703 760.803571 1092.06931 761.526786 1091.09901 762.571429 1090.85644 763.616071 1090.61386 764.660714L1100.55941 764.580357C1100.39769 763.616071 1100.23597 762.25 1099.18482 761.285714 1098.29538 760.401786 1096.92079 760 1095.70792 760zM1161.36469 760C1159.66667 760 1158.4538 760.803571 1157.72607 761.526786 1156.75578 762.571429 1156.5132 763.616071 1156.27063 764.660714L1166.21617 764.580357C1166.05446 763.616071 1165.89274 762.25 1164.84158 761.285714 1163.95215 760.401786 1162.57756 760 1161.36469 760zM1221.28053 755.982143 1222.4934 759.839286 1223.70627 755.982143H1224.91914V760.803571H1224.11056V757.830357L1224.19142 756.866071 1223.94884 757.669643 1222.89769 760.883929H1222.08911L1221.03795 757.669643 1220.79538 756.866071 1220.87624 757.830357V760.803571H1220.06766V755.982143H1221.28053zM1219.66337 755.901786V756.625H1218.0462V760.803571H1217.23762V756.625H1215.62046V755.901786H1219.66337zM983.707685 647.665636 1012.49328 698.718315l28.88386-51.052679H1092.69771V659.626331h-44.32753L1012.58608 723 970 647.665636h13.707685zm108.992755 30.353198v11.960695H1053.70641v17.747247H1092.70044v11.960696H1041.74562V678.018834H1092.70044zM1218.81169 719.684742h11.95533V647.663998h-11.95533v72.020744zm-82.14076-72.016377C1148.0749 647.668365 1157.27341 656.8668 1157.27341 668.270676 1157.27341 676.824948 1151.93991 684.276499 1144.3955 687.31171L1162.05554 719.689109h-11.95533L1133.26448 688.780184h-23.6377V719.689109h-11.95533V647.668365zM1214.11799 647.666181V659.621418H1189.55771v60.065508h-11.95533V659.621418H1161.31802C1159.66393 654.932126 1156.8143 650.886998 1153.04209 647.851788V647.666181H1214.11799zm-77.44706 11.95742H1109.62678V676.917751H1136.67093C1141.45307 676.917751 1145.31808 673.05277 1145.31808 668.270676S1141.45307 659.623601 1136.67093 659.623601zm186.44473-14.624693L1292.3921 696.138932V696.231735C1288.06853 703.404877 1280.25116 708.19243 1271.33107 708.19243 1257.71618 708.19243 1246.67798 697.154308 1246.67798 683.539532c0-13.614775 11.0382-24.6528970000001 24.65309-24.6528970000001C1279.6998 658.886635 1287.0586 663.024566 1291.56778 669.4662L1298.00401 658.706487C1291.38217 651.527886 1281.90525 647.117005 1271.33107 647.117005 1251.18716 647.117005 1234.9028 663.395778 1234.9028 683.539532 1234.9028 703.683286 1251.18716 719.96206 1271.33107 719.96206 1284.57473 719.96206 1296.1643 712.881721 1302.60599 702.302156L1323.11566 668.08507 1354.20497 719.869257 1368 719.689109 1323.11566 644.998908z" id="Vertica-OT-White"/></g></g></svg></span><span class=navbar-brand__name></span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=https://www.vertica.com/docs/latest/HTML/Content/Home.htm target=_blank><span>Documentation</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=https://www.vertica.com/knowledgebase/ target=_blank><span>Knowledge Base</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=https://academy.vertica.com/ target=_blank><span>Academy</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=https://forum.vertica.com/ target=_blank><span>Forum</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=https://www.microfocus.com/en-us/support/Vertica%20Analytics%20Platform target=_blank><span>Support</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav foldable-nav" id=td-section-nav><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m--li><a href=../../ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-><span>Vertica Integrator's Guide</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-server-installation-li><input type=checkbox id=m-server-installation-check>
<label for=m-server-installation-check><a href=../../server-installation/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-server-installation><span>Server installation and configuration</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-containers-li><input type=checkbox id=m-containers-check>
<label for=m-containers-check><a href=../../containers/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-containers><span>Containerized Vertica</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-data-protocols-formats-li><input type=checkbox id=m-data-protocols-formats-check checked>
<label for=m-data-protocols-formats-check><a href=../../data-protocols-formats/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-data-protocols-formats><span>Data protocols and formats</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-data-protocols-formatsreflection-li><input type=checkbox id=m-data-protocols-formatsreflection-check>
<label for=m-data-protocols-formatsreflection-check><a href=../../data-protocols-formats/reflection/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-data-protocols-formatsreflection><span>Reflection format</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-data-protocols-formatsfrontend-backend-li><input type=checkbox id=m-data-protocols-formatsfrontend-backend-check checked>
<label for=m-data-protocols-formatsfrontend-backend-check><a href=../../data-protocols-formats/frontend-backend/ class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id=m-data-protocols-formatsfrontend-backend><span class=td-sidebar-nav-active-item id=td-sidebar-nav-active-item>Frontend and backend protocols</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-data-protocols-formatshashing-funcs-li><input type=checkbox id=m-data-protocols-formatshashing-funcs-check>
<label for=m-data-protocols-formatshashing-funcs-check><a href=../../data-protocols-formats/hashing-funcs/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-data-protocols-formatshashing-funcs><span>Hashing functions</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-cli-args-li><input type=checkbox id=m-cli-args-check>
<label for=m-cli-args-check><a href=../../cli-args/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-cli-args><span>Command line arguments</span></a></label></li></ul></li></ul></nav></div><script>var myElement=document.getElementById("td-sidebar-nav-active-item");myElement.scrollIntoView({behavior:"auto",block:"center",inline:"start"})</script></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"></div><div class=td-toc><nav id=TableOfContents><ul><li><ul><li><ul><li><ul><li></li></ul></li></ul></li><li><a href=#overview>Overview</a><ul><li><a href=#formats-and-format-codes>Formats and Format Codes</a><ul><li><a href=#binary-format-encoding-for-each-data-type>Binary Format Encoding For Each Data Type</a></li></ul></li></ul></li><li><a href=#message-flow>Message Flow</a><ul><li><a href=#start-up>Start-up</a><ul><li><a href=#connection-load-balancing>Connection load balancing</a></li><li><a href=#ssl-session-encryption>SSL session encryption</a></li><li><a href=#startup-message-and-authentication>Startup message and authentication</a></li></ul></li><li><a href=#authentication>Authentication</a><ul><li><a href=#gss-api--kerberos-authentication>GSS-API / Kerberos Authentication</a></li><li><a href=#oauth2-authentication>OAuth2 authentication</a></li><li><a href=#protocol-311>(Protocol 3.11)</a></li><li><a href=#protocol-312>(Protocol 3.12)</a></li></ul></li><li><a href=#simple-query>Simple Query</a></li><li><a href=#extended-query>Extended Query</a></li><li><a href=#copy-operations>COPY Operations</a><ul><li><a href=#copy-local-mode>Copy-Local mode</a></li><li><a href=#copy-stdin-mode>Copy-Stdin mode</a></li></ul></li><li><a href=#asynchronous-operations>Asynchronous Operations</a></li><li><a href=#canceling-requests-in-progress>Canceling Requests in Progress</a></li><li><a href=#termination>Termination</a></li></ul></li><li><a href=#message-data-types>Message Data Types</a></li><li><a href=#message-formats>Message Formats</a><ul><li><a href=#frontend>Frontend</a><ul><li><a href=#bind-b>Bind &lsquo;B&rsquo;</a></li><li><a href=#cancelrequest>CancelRequest</a></li><li><a href=#changepassword-n>ChangePassword &rsquo;n&rsquo;</a></li><li><a href=#close-c>Close &lsquo;C&rsquo;</a></li><li><a href=#copydata-d>CopyData &rsquo;d&rsquo;</a></li><li><a href=#copydone-c>CopyDone &lsquo;c&rsquo;</a></li><li><a href=#copyerror-e>CopyError &rsquo;e&rsquo;</a></li><li><a href=#copyfail-f>CopyFail &lsquo;f&rsquo;</a></li><li><a href=#describe-d>Describe &lsquo;D&rsquo;</a></li><li><a href=#endofbatchrequest-j>EndOfBatchRequest &lsquo;j&rsquo;</a></li><li><a href=#execute-e>Execute &lsquo;E&rsquo;</a></li><li><a href=#flush-h>Flush &lsquo;H&rsquo;</a></li><li><a href=#loadbalancerequest>LoadBalanceRequest</a></li><li><a href=#marsrequest-_>MarsRequest &lsquo;_&rsquo;</a></li><li><a href=#parse-p>Parse &lsquo;P&rsquo;</a></li><li><a href=#password-p>Password &lsquo;p&rsquo;</a></li><li><a href=#query-q>Query &lsquo;Q&rsquo;</a></li><li><a href=#sslrequest-8>SSLRequest &lsquo;8&rsquo;</a></li><li><a href=#startuprequest>StartupRequest</a></li><li><a href=#sync-s>Sync &lsquo;S&rsquo;</a></li><li><a href=#terminate-x>Terminate &lsquo;X&rsquo;</a></li><li><a href=#verifiedfiles-f>VerifiedFiles &lsquo;F&rsquo;</a></li></ul></li><li><a href=#backend>Backend</a><ul><li><a href=#authenticationok-r>AuthenticationOk &lsquo;R&rsquo;</a></li><li><a href=#authenticationcleartextpassword-r>AuthenticationCleartextPassword &lsquo;R&rsquo;</a></li><li><a href=#authenticationmd5password-r>AuthenticationMD5Password &lsquo;R&rsquo;</a></li><li><a href=#authenticationgss-r>AuthenticationGSS &lsquo;R&rsquo;</a></li><li><a href=#authenticationgsscontinue-r>AuthenticationGSSContinue &lsquo;R&rsquo;</a></li><li><a href=#authenticationpasswordexpired-r>AuthenticationPasswordExpired &lsquo;R&rsquo;</a></li><li><a href=#authenticationpasswordchanged-r>AuthenticationPasswordChanged &lsquo;R&rsquo;</a></li><li><a href=#authenticationpasswordgrace-r>AuthenticationPasswordGrace &lsquo;R&rsquo;</a></li><li><a href=#authenticationoauth-r>AuthenticationOAuth &lsquo;R&rsquo;</a></li><li><a href=#authenticationhashpassword-r>AuthenticationHashPassword &lsquo;R&rsquo;</a></li><li><a href=#authenticationhashmd5password-r>AuthenticationHashMD5Password &lsquo;R&rsquo;</a></li><li><a href=#authenticationhashsha512password-r>AuthenticationHashSHA512Password &lsquo;R&rsquo;</a></li><li><a href=#backendkeydata-k>BackendKeyData &lsquo;K&rsquo;</a></li><li><a href=#bindcomplete-2>BindComplete &lsquo;2&rsquo;</a></li><li><a href=#closecomplete-3>CloseComplete &lsquo;3&rsquo;</a></li><li><a href=#commandcomplete-c>CommandComplete &lsquo;C&rsquo;</a></li><li><a href=#commanddescription-m>CommandDescription &rsquo;m&rsquo;</a></li><li><a href=#copydoneresponse-c>CopyDoneResponse &lsquo;c&rsquo;</a></li><li><a href=#copyinresponse-g>CopyInResponse &lsquo;G&rsquo;</a></li><li><a href=#datarow-d>DataRow &lsquo;D&rsquo;</a></li><li><a href=#emptyqueryresponse-i>EmptyQueryResponse &lsquo;I&rsquo;</a></li><li><a href=#endofbatchresponse-j>EndOfBatchResponse &lsquo;J&rsquo;</a></li><li><a href=#errorresponse-e>ErrorResponse &lsquo;E&rsquo;</a></li><li><a href=#loadbalanceresponse-yn>LoadBalanceResponse &lsquo;Y/N&rsquo;</a></li><li><a href=#loadfile-h>LoadFile &lsquo;H&rsquo;</a></li><li><a href=#marsresponse-_>MarsResponse &lsquo;_&rsquo;</a></li><li><a href=#nodata-n>NoData &rsquo;n&rsquo;</a></li><li><a href=#noticeresponse-n>NoticeResponse &lsquo;N&rsquo;</a></li><li><a href=#parameterdescription-t>ParameterDescription &rsquo;t&rsquo;</a></li><li><a href=#parameterstatus-s>ParameterStatus &lsquo;S&rsquo;</a></li><li><a href=#parsecomplete-1>ParseComplete &lsquo;1&rsquo;</a></li><li><a href=#portalsuspended-s>PortalSuspended &rsquo;s&rsquo;</a></li><li><a href=#readyforquery-z>ReadyForQuery &lsquo;Z&rsquo;</a></li><li><a href=#rowdescription-t>RowDescription &lsquo;T&rsquo;</a></li><li><a href=#verifyfiles-f>VerifyFiles &lsquo;F&rsquo;</a></li><li><a href=#writefile-o>WriteFile &lsquo;O&rsquo;</a></li></ul></li></ul></li><li><a href=#error-and-notice-message-fields>Error and Notice Message Fields</a></li><li><a href=#data-collector-utility>Data Collector utility</a><ul><li><ul><li><a href=#logged-frontend-messages>Logged Frontend Messages</a></li><li><a href=#logged-backend-messages>Logged Backend Messages</a></li></ul></li><li><a href=#setup-and-usage>Setup and Usage</a><ul><li><a href=#sample-query>Sample Query</a></li><li><a href=#clearing-the-dc-table>Clearing the DC Table</a></li></ul></li></ul></li><li><a href=#summary-of-changes-since-protocol-30>Summary of Changes since Protocol 3.0</a><ul><li><a href=#protocol-314>Protocol 3.14</a></li><li><a href=#protocol-313>Protocol 3.13</a></li><li><a href=#protocol-312-1>Protocol 3.12</a></li><li><a href=#protocol-311-1>Protocol 3.11</a></li><li><a href=#protocol-310>Protocol 3.10</a></li><li><a href=#protocol-39>Protocol 3.9</a></li><li><a href=#protocol-38>Protocol 3.8</a></li><li><a href=#protocol-37>Protocol 3.7</a></li><li><a href=#protocol-36>Protocol 3.6</a></li><li><a href=#protocol-35>Protocol 3.5</a></li><li><a href=#protocol-34-and-before>Protocol 3.4 and before</a></li></ul></li></ul></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=../../data-protocols-formats/>Data protocols and formats</a></li><li class="breadcrumb-item active" aria-current=page><a href=../../data-protocols-formats/frontend-backend/ aria-disabled=true class="btn-link disabled">Frontend and backend protocols</a></li></ol></nav><div class=td-content><h1>Frontend and backend protocols</h1><header class=article-meta></header><p>Vertica uses a message-based protocol for communication between frontends and backends (clients and servers). The protocol is supported over TCP/IP sockets. This document describes version 3.14 of the protocol.</p><p>For purposes of the protocol, the terms &ldquo;backend&rdquo; and &ldquo;server&rdquo; are interchangeable; likewise &ldquo;frontend&rdquo; and &ldquo;client&rdquo; are interchangeable. See <a href=https://github.com/vertica/vertica-python>vertica-python</a> for a frontend implementation reference of the protocol.</p><h5 id=questions>Questions?</h5><p>Contact the team at <a href=mailto:vertica-client@microfocus.com>vertica-client@microfocus.com</a>.</p><h2 id=overview>Overview</h2><p>The protocol has separate phases for startup and normal operation.</p><p>In the startup phase, the frontend opens a connection to the backend and authenticates itself to the satisfaction of the backend. (This might involve a single message, or multiple messages depending on the authentication method being used.) If all goes well, the backend then sends status information to the frontend, and finally enters normal operation. Except for the initial startup-request message, this part of the protocol is driven by the backend.</p><p>During normal operation, the frontend sends queries and other commands to the backend, and the backend sends back query results and other responses. There are a few cases wherein the backend will send unsolicited messages, but for the most part this portion of a session is driven by frontend requests.</p><p>Termination of the session is normally by frontend choice, but can be forced by the backend in certain cases. In any case, when the backend closes the connection, it will roll back any open (incomplete) transaction before exiting.</p><p>Within normal operation, SQL commands can be executed through either of two sub-protocols. In the &ldquo;simple query&rdquo; protocol, the frontend just sends a textual query string, which is parsed and immediately executed by the backend. In the &ldquo;extended query&rdquo; protocol, processing of queries is separated into multiple steps: parsing, binding of parameter values, and execution. This offers flexibility and performance benefits, at the cost of extra complexity.</p><p>Normal operation has additional sub-protocols for special operations such as COPY.</p><p>All communication is through a stream of messages. The byte order of all messages are big-endian (A special case in <a href=#writefile-o>WriteFile</a> message). All data sending to or coming from the backend are represented as UTF-8.</p><p><a id=formats-formatcodes></a></p><h3 id=formats-and-format-codes>Formats and Format Codes</h3><p>Data of a particular SQL data type might be transmitted in either &ldquo;text&rdquo; format or &ldquo;binary&rdquo; format. The desired format for any value is specified by a <em>format code</em>. Text has format code zero, binary has format code one, and all other format codes are reserved for future definition.</p><p>The text representation of values is whatever strings are produced and accepted by the input/output conversion functions for the particular data type. For example, the value of DATE/TIMESTAMP data is a date/timestamp in proleptic Gregorian calendar.</p><h4 id=binary-format-encoding-for-each-data-type>Binary Format Encoding For Each Data Type</h4><table><thead><tr><th><p>Data Type</p></th><th><p>Length (bytes)</p></th><th><p>Data Content</p></th></tr></thead><tbody><tr><td><p>BOOLEAN</p></td><td><p>1</p></td><td><p>0 for false, 1 for true.</p></td></tr><tr><td><p>CHAR</p></td><td><p>User-specified</p></td><td><p>A sequence of UTF-8 encoding bytes.</p><p>:* UTF-8 strings can contain multi-byte characters. Therefore, number
of characters in the string may not equal the number of bytes.</p><p>:* Strings shorter than the specified length are right-padded with
spaces.</p></td></tr><tr><td><p>VARCHAR</p></td><td rowspan=2><p>Variable-length</p></td><td rowspan=2><p>A sequence of UTF-8 encoding bytes. Remember that UTF-8 strings
can contain multi-byte characters. Therefore, number of characters in
the string may not equal the number of bytes.</p></td></tr><tr><td><p>LONG VARCHAR</p></td></tr><tr><td><p>INTEGER</p></td><td><p>8</p></td><td><p>64-bit integer.</p></td></tr><tr><td><p>FLOAT</p></td><td><p>8</p></td><td><p>Encoded in IEEE-754 format.</p></td></tr><tr><td><p>NUMERIC</p></td><td><p>N (N = (precision//19+1)*8)</p></td><td><p>N-byte signed integer containing the unscaled value. Scale is
calculated separately with <a href=#rowdescription>RowDescription's</a> type modifier.</p></td></tr><tr><td><p>DATE</p></td><td><p>8</p></td><td><p>64-bit integer containing the <a href=https://en.wikipedia.org/wiki/Julian_day>Julian day number</a>
(JDN) for the date.</p></td></tr><tr><td><p>INTERVAL</p></td><td><p>8</p></td><td><p>64-bit integer containing the number of microseconds in the
interval.</p></td></tr><tr><td><p>INTERVALYM</p></td><td><p>8</p></td><td><p>64-bit integer containing the number of months in the
interval.</p></td></tr><tr><td><p>TIME</p></td><td><p>8</p></td><td><p>64-bit integer containing the number of microseconds since
midnight in the UTC time zone.</p></td></tr><tr><td><p>TIMETZ</p></td><td><p>8</p></td><td><p>64-bit value where:</p><ul><li>Upper 40 bits contain the number of microseconds since midnight in
the UTC time zone.</li><li>Lower 24 bits contain time zone as the UTC offset in seconds
calculated as follows:<br>Actual time zone = 86400(24hrs) - this 3-byte value as integer</li></ul></td></tr><tr><td><p>TIMESTAMP</p></td><td><p>8</p></td><td><p>64-bit integer containing the number of microseconds since Julian
day: Jan 01 2000 00:00:00.</p></td></tr><tr><td><p>TIMESTAMPTZ</p></td><td><p>8</p></td><td><p>64-bit integer containing the number of microseconds since Julian
day: Jan 01 2000 00:00:00 in the UTC timezone.</p></td></tr><tr><td><p>UUID</p></td><td><p>16</p></td><td><p>A 128-bit value interpreted as UUID.</p></td></tr><tr><td><p>BINARY</p></td><td><p>User-specified</p></td><td><p>A sequence of bytes. If the value is smaller than the specified
length, the remainder should be filled with nulls (\x00).</p></td></tr><tr><td><p>VARBINARY</p></td><td rowspan=2><p>Variable-length</p></td><td rowspan=2><p>A sequence of bytes.</p></td></tr><tr><td><p>LONG VARBINARY</p></td></tr><tr><td><p>Complex types (ARRAY, MAP, ROW, SET)</p></td><td><p>/</p></td><td><p>Data content is the same as TEXT format.</p></td></tr></tbody></table><blockquote><p><strong>Note</strong>: While PostgreSQL lets you change the format on a per-column/type basis in the protocol, Vertica currently does not honor that and instead does it as a session-level setting. So unfortunately that means its an all-or-nothing implementation - all data types must be implemented. To opt into binary format protocol for data reads from backend (queries), the frontend have to set the <a href=#startuprequest>StartupRequest</a> message to include parameter &lsquo;binary_data_protocol&rsquo; set to &lsquo;1&rsquo; (&lsquo;0&rsquo; is the default, which is the string format protocol), and set the <a href=#bind-b>Bind</a> message&rsquo;s last two fields (result-column format code) as &lsquo;1&rsquo;. No Vertica clients currently support data writes (server-prepared statement bind values) to the backend in binaryformat.</p></blockquote><h2 id=message-flow>Message Flow</h2><p>This section describes the message flow and the semantics of each message type. (Details of the exact representation of each message appear in Section <a href=#message-formats>Message Formats</a>.)</p><h3 id=start-up>Start-up</h3><p>To begin a session, a frontend opens a connection over TCP/IP to the server. With a TCP socket, the frontend does the following steps:</p><h4 id=connection-load-balancing>Connection load balancing</h4><p>A backend with load balancing enabled can redirect connections based on the connection&rsquo;s origin. To initiate a connection load balancing, the frontend sends a <a href=#loadbalancerequest>LoadBalanceRequest</a> message. The server then responds with a <a href=#loadbalanceresponse-yn>LoadBalanceResponse</a> message, the first byte of the message containing <em><strong>Y</strong></em>or<em><strong>N</strong></em>, indicating that it is willing or unwilling to perform load balancing, respectively. To continue after<em><strong>Y</strong></em>, the frontend must create a new TCP socket, which connects to the new host/port specified in the <a href=#loadbalanceresponse-yn>LoadBalanceResponse &lsquo;Y&rsquo;</a> message. To continue after<em><strong>N</strong></em>, send the usual <a href=#sslrequest-8>SSLRequest</a> message and <a href=#startuprequest>Startup</a> message and proceed without connection load balancing.</p><p>To enable connection load balancing on the server side, please see Vertica documentation.</p><h4 id=ssl-session-encryption>SSL session encryption</h4><p>Frontend/backend communications can be encrypted using SSL. This provides communication security in environments where attackers might be able to capture the session traffic.</p><p>To initiate an SSL-encrypted connection, the frontend sends an <a href=#sslrequest-8>SSLRequest</a> message. The server then responds with a single byte containing <em><strong>S</strong></em>or<em><strong>N</strong></em>, indicating that it is willing or unwilling to perform SSL, respectively. The frontend might close the connection at this point if it is dissatisfied with the response. To continue after<em><strong>S</strong></em>, perform an SSL startup handshake (not described here, part of the SSL specification) with the server. If this is successful, all subsequent data will be SSL-encrypted. To continue after<em><strong>N</strong></em>, send the usual <a href=#startuprequest>Startup</a> message and proceed without encryption.</p><p>To enable TLS/SSL communications on the server side, please see Vertica documentation.</p><h4 id=startup-message-and-authentication>Startup message and authentication</h4><p>Once the socket setup is done, the frontend sends a <a href=#startuprequest>StartupRequest</a> message to the backend. This message includes the names of the user and of the database the user wants to connect to; it also identifies the particular protocol version to be used. Optionally, the <a href=#startuprequest>StartupRequest</a> message can include additional settings for run-time parameters. The server then uses this information to determine whether the connection is provisionally acceptable, and what additional authentication is required (if any).</p><p>The server then sends an appropriate authentication request message, to which the frontend must reply with an appropriate authentication response message (such as a <a href=#password-p>Password</a>).</p><p>The authentication cycle ends with the server either rejecting the connection attempt (<a href=#errorresponse-e>ErrorResponse</a>), or sending <a href=#authenticationok-r>AuthenticationOk</a>.</p><p>The possible messages from the server in this phase are:</p><dl><dt><a href=#errorresponse-e>ErrorResponse</a></dt><dd>The connection attempt has been rejected. The server then immediately closes the connection.</dd><dt><a href=#authenticationok-r>AuthenticationOk</a></dt><dd>The authentication exchange is successfully completed.</dd><dt><a href=#authenticationcleartextpassword-r>AuthenticationCleartextPassword</a></dt><dd>The frontend must now send a <a href=#password-p>Password</a> message containing the password in clear-text form. If this is the correct password, the server responds with an <a href=#authenticationok-r>AuthenticationOk</a>, otherwise it responds with an <a href=#errorresponse-e>ErrorResponse</a>.</dd><dt><a href=#authenticationgss-r>AuthenticationGSS</a></dt><dd>The frontend must now initiate a GSSAPI negotiation. The frontend will send a <a href=#password-p>Password</a> message with the first part of the GSSAPI data stream in response to this. If further messages are needed, the server will respond with <a href=#authenticationgsscontinue-r>AuthenticationGSSContinue</a>. See <a href=#gss-api--kerberos-authentication>GSS-API/Kerberos Authentication</a>.</dd><dt><a href=#authenticationgsscontinue-r>AuthenticationGSSContinue</a></dt><dd>This message contains the response data from the previous step of GSSAPI negotiation (AuthenticationGSS, or a previous AuthenticationGSSContinue). If the GSSAPI data in this message indicates more data is needed to complete the authentication, the frontend must send that data as another <a href=#password-p>Password</a> message. If GSSAPI authentication is completed by this message, the server will next send <a href=#authenticationok-r>AuthenticationOk</a> to indicate successful authentication or <a href=#errorresponse-e>ErrorResponse</a> to indicate failure.</dd><dt><a href=#authenticationpasswordexpired-r>AuthenticationPasswordExpired</a></dt><dd>The connection attempt has been rejected as the password is expired.</dd><dt><a href=#authenticationpasswordgrace-r>AuthenticationPasswordGrace</a></dt><dd>This message informs the frontend that the password will expire soon. The frontend can display a warning message. Then, the frontend must wait for further messages from the server.</dd><dt><a href=#authenticationmd5password-r>AuthenticationMD5Password</a> or <a href=#authenticationhashmd5password-r>AuthenticationHashMD5Password</a></dt><dd>The frontend must now send a <a href=#password-p>Password</a> message containing the password (with username) encrypted via MD5, then encrypted again using the 4-byte random salt specified in this message. If this is the correct password, the server responds with an <a href=#authenticationok-r>AuthenticationOk</a>, otherwise it responds with an <a href=#errorresponse-e>ErrorResponse</a>.</dd><dt><a href=#authenticationhashpassword-r>AuthenticationHashPassword</a> or <a href=#authenticationhashsha512password-r>AuthenticationHashSHA512Password</a></dt><dd>The frontend must now send a <a href=#password-p>Password</a> message containing the password (with the 16-byte user salt specified in this message) encrypted via SHA512, then encrypted again using the 4-byte random salt specified in this message. If this is the correct password, the server responds with an <a href=#authenticationok-r>AuthenticationOk</a>, otherwise it responds with an <a href=#errorresponse-e>ErrorResponse</a>.</dd></dl><p>If the frontend does not support the authentication method requested by the server, then it should immediately close the connection.</p><p>After having received AuthenticationOk, the frontend must wait for further messages from the server. In this phase a backend process is being started, and the frontend is just an interested bystander. It is still possible for the start-up attempt to fail (ErrorResponse), but in the normal case the backend will send some <a href=#parameterstatus-s>ParameterStatus</a> messages, <a href=#backendkeydata-k>BackendKeyData</a>, and finally <a href=#readyforquery-z>ReadyForQuery</a>.</p><p>During this phase the backend will attempt to apply any additional run-time parameter settings that were given in the Startup message. If successful, these values become session defaults. An error causes ErrorResponse and exit.</p><p>The possible messages from the backend in this phase are:</p><dl><dt><a href=#parameterstatus-s>ParameterStatus</a></dt><dd>This message informs the frontend about the current (initial) setting of backend parameters, such as client_locale or auto_commit. The frontend can ignore this message, or record the settings for its future use. The frontend should not respond to this message, but should continue listening for a ReadyForQuery message.</dd><dt><a href=#backendkeydata-k>BackendKeyData</a></dt><dd>This message provides secret-key data that the frontend must save if it wants to be able to issue cancel requests later. The frontend should not respond to this message, but should continue listening for a ReadyForQuery message.</dd><dt><a href=#readyforquery-z>ReadyForQuery</a></dt><dd>Start-up is completed. The frontend can now issue commands.</dd><dt><a href=#errorresponse-e>ErrorResponse</a></dt><dd>Start-up failed. The connection is closed after sending this message.</dd><dt><a href=#noticeresponse-n>NoticeResponse</a></dt><dd>A warning message has been issued. The frontend should display the message but continue listening for ReadyForQuery or ErrorResponse.</dd></dl><p>The <a href=#readyforquery-z>ReadyForQuery</a> message is the same one that the backend will issue after each command cycle. Depending on the coding needs of the frontend, it is reasonable to consider ReadyForQuery as starting a command cycle, or to consider ReadyForQuery as ending the start-up phase and each subsequent command cycle.</p><h3 id=authentication>Authentication</h3><h4 id=gss-api--kerberos-authentication>GSS-API / Kerberos Authentication</h4><p>GSS-API is <em>Generic Security Service API (RFC 2744)</em>. It provides a common interface for accessing different security services. One of the most popular security services available for GSS-API is the Kerberos v5.</p><p>Here are the most basic steps taken to authenticate in a Kerberized environment:</p><ol><li>Client requests an authentication ticket (TGT) from the Key Distribution Center (KDC).</li><li>The KDC verifies the credentials and sends back an encrypted TGT and session key.</li><li>The TGT is encrypted using the Ticket Granting Service (TGS) secret key.</li><li>The client stores the TGT and when it expires the local session manager will request another TGT (this process is transparent to the user).</li></ol><p><code>kinit</code> in Linux is a command often used for obtaining or caching/renewing a Kerberos ticket-granting ticket (TGT).</p><p>When the client requests access to a server, this is the process:</p><ol><li>The client sends a <a href=#startuprequest>StartupRequest</a> message to the server.</li><li>The server sends back a <a href=#authenticationgss-r>AuthenticationGSS</a> message to request GSS-API negotiation.</li><li>The client sends the current TGT to the TGS with the Service Principal Name (SPN) of the Vertica server.</li><li>The KDC verifies the TGT of the user and that the user has access to the Vertica server service.</li><li>TGS sends a valid session key for the service to the client.</li><li>Client forwards the session key (within a <a href=#password-p>Password</a> message) to the server to prove the user has access.</li><li>If further messages are needed, the server will respond with a <a href=#authenticationgsscontinue-r>AuthenticationGSSContinue</a> message. The client sends data as another <a href=#password-p>Password</a> message.</li><li>The server grants access and sends a <a href=#authenticationok-r>AuthenticationOk</a>; or sends a <a href=#errorresponse-e>ErrorResponse</a> to indicate failure.</li></ol><p><img src=../../images/data-protocols-formats/frontent-backend/GSSAuth_Msg_flow.png alt="Example message flow of GSS authentication"></p><h4 id=oauth2-authentication>OAuth2 authentication</h4><p>OAuth lets client applications verify themselves to and receive an OAuth access token from an identity provider (IDP) like Keycloak or Okta. These client applications can then pass the access token to authenticate to Vertica server as a substitute for username & password.</p><p>A client application should first configure the IDP and get the following parameters:</p><ul><li><p>client_id: ID of the confidential client (application) registered in IDP. This is used by server to call introspection API to retrieve user grants; and used by client to retrieve tokens.</p></li><li><p>client_secret: The secret of the confidential client (application) registered in IDP. This is used by server to call introspection API to retrieve user grants; and used by client to retrieve tokens.</p></li><li><p>introspect_url: API used by server to introspect access token. This URL is exposed by IDP and must be accessible from server.</p></li><li><p>token_url: API used by client to refresh the token. This URL is exposed by IDP and must be accessible from client.</p></li></ul><p><img src=../../images/data-protocols-formats/frontent-backend/OAuth_Msg_flow.png alt="Example message flow of OAuth authentication"></p><p>Then in the server, create an OAuth authentication record with above parameters, and grant it to the user.</p><p>The client application call the IDP token API to retrieve the following parameters:</p><ul><li><p>access_token: Access tokens are the thing that applications use to make connection requests on behalf of a user.</p></li><li><p>refresh_token: Refresh tokens are used to obtain a new access token.</p></li></ul><figure><img src=../../images/data-protocols-formats/frontent-backend/OAuth_refresh_Msg_flow.png title="Example message flow of OAuth access token refresh" width=350 alt="Example message flow of OAuth access token refresh"><figcaption aria-hidden=true>Example message flow of OAuth access
token refresh</figcaption></figure><h4 id=protocol-311>(Protocol 3.11)</h4><p>In the <a href=#startuprequest>StartupRequest</a>, only access_token is required to be specified in <strong>oauth_access_token</strong> parameter, no client id/secret is included in the request. The &lsquo;user&rsquo; parameter is optional. The backend validates token using OAuth Introspect query. In case oauth_access_token is valid and permissions are sufficient, the backend sends <a href=#authenticationok-r>AuthenticationOk</a>, otherwise it responds with an <a href=#errorresponse-e>ErrorResponse</a>. Token refresh flow can be triggered by frontend after the token validation (if token introspection fails).</p><h4 id=protocol-312>(Protocol 3.12)</h4><p>In the <a href=#startuprequest>StartupRequest</a>, if the &lsquo;auth_category&rsquo; parameter is specified as &ldquo;OAuth&rdquo;, the server will send the client an <a href=#authenticationoauth-r>AuthenticationOAuth</a> message. The client will respond with a <a href=#password-p>Password</a> message containing an OAuth access token. The backend validates token using OAuth Introspect query. In case the access token is valid and permissions are sufficient, the backend sends <a href=#authenticationok-r>AuthenticationOk</a>, otherwise it responds with an <a href=#errorresponse-e>ErrorResponse</a>. Token refresh flow can be triggered by frontend after the token validation (if token introspection fails).</p><p>If &lsquo;auth_category&rsquo; parameter is not set, the server still check for the token in the &lsquo;oauth_access_token&rsquo; parameter of <a href=#startuprequest>StartupRequest</a> message.</p><h3 id=simple-query>Simple Query</h3><p>A simple query cycle is initiated by the frontend sending a <a href=#query-q>Query</a> message to the backend. The message includes an SQL command (or commands) expressed as a text string. The backend then sends one or more response messages depending on the contents of the query command string, and finally a <a href=#readyforquery-z>ReadyForQuery</a> response message. ReadyForQuery informs the frontend that it can safely send a new command.</p><p><img src=../../images/data-protocols-formats/frontent-backend/SimpleQuery_Msg_flow.png alt="Example message flow of simple query with data rows returned"></p><p>The possible response messages from the backend are:</p><ul><li><dl><dt><a href=#commandcomplete-c>CommandComplete</a></dt><dd>An SQL command completed normally.</dd></dl></li><li><dl><dt><a href=#rowdescription-t>RowDescription</a></dt><dd>Indicates that rows are about to be returned in response to a query. The contents of this message describe the column layout of the rows. This will be followed by a DataRow message for each row being returned to the frontend.</dd></dl></li><li><dl><dt><a href=#verifyfiles-f>VerifyFiles</a></dt><dd>The backend starts processing a COPY LOCAL command; see Section <a href=#copy-operations>COPY Operations</a> &ndash; <a href=#copy-local-mode>Copy-Local mode</a>.</dd></dl></li><li><dl><dt><a href=#copyinresponse-g>CopyInResponse</a></dt><dd>The backend starts processing a COPY STDIN command; see Section <a href=#copy-operations>COPY Operations</a> &ndash; <a href=#copy-stdin-mode>Copy-Stdin mode</a></dd></dl></li><li><dl><dt><a href=#datarow-d>DataRow</a></dt><dd>One of the set of rows returned by a query.</dd></dl></li><li><dl><dt><a href=#emptyqueryresponse-i>EmptyQueryResponse</a></dt><dd>An empty query string was recognized.</dd></dl></li><li><dl><dt><a href=#parameterstatus-s>ParameterStatus</a></dt><dd>This message informs the frontend about the current setting of backend parameters, a SET query normally produce this message.</dd></dl></li><li><dl><dt><a href=#noticeresponse-n>NoticeResponse</a></dt><dd>A warning message has been issued in relation to the query. For example, issue a COMMIT when no transaction in progress. NoticeResponses are in addition to other responses, i.e., the backend will continue processing the command.</dd></dl></li><li><dl><dt><a href=#errorresponse-e>ErrorResponse</a></dt><dd>An error has occurred.</dd></dl></li><li><dl><dt><a href=#readyforquery-z>ReadyForQuery</a></dt><dd>Processing of the query string is complete. A separate message is sent to indicate this because the query string might contain multiple SQL commands. (<a href=#commandcomplete-c>CommandComplete</a> marks the end of processing <strong>one</strong> SQL command, not the whole string.) ReadyForQuery will always be sent, whether processing terminates successfully or with an error.</dd></dl></li></ul><p>The response to a SELECT query (or other queries that return row sets, such as EXPLAIN or SHOW) normally consists of <a href=#rowdescription-t>RowDescription</a>, zero or more <a href=#datarow-d>DataRow</a> messages, and then <a href=#commandcomplete-c>CommandComplete</a>. COPY command invokes special protocol as described in Section <a href=#copy-operations>COPY Operations</a>. Other query types normally produce only a <a href=#commandcomplete-c>CommandComplete</a> message.</p><p>Since a query string could contain several queries (separated by semicolons), there might be several such response sequences before the backend finishes processing the query string. ReadyForQuery is issued when the entire string has been processed and the backend is ready to accept a new query string.</p><p>If a completely empty (no contents other than whitespace) query string is received, the response is <a href=#emptyqueryresponse-i>EmptyQueryResponse</a> followed by <a href=#readyforquery-z>ReadyForQuery</a>.</p><p>In the event of an error, <a href=#errorresponse-e>ErrorResponse</a> is issued followed by ReadyForQuery. All further processing of the query string is aborted by ErrorResponse (even if more queries remained in it). Note that this might occur partway through the sequence of messages generated by an individual query.</p><p>Recommended practice is to code frontends in a state-machine style that will accept any message type at any time that it could make sense, rather than wiring in assumptions about the exact sequence of messages.</p><h3 id=extended-query>Extended Query</h3><p>The extended query protocol breaks down the above-described simple query protocol into multiple steps. The overall execution cycle consists of a <em>parse</em> step, which creates a prepared statement from a textual query string; a <em>bind</em> step, which creates a portal given a prepared statement and values for any needed parameters; and an <em>execute</em> step that runs a portal&rsquo;s query. One of the advantages of extended query protocol is preventing SQL injection attacks.</p><p><img src=../../images/data-protocols-formats/frontent-backend/PreparedStatement_Msg_flow.png alt="Example message flow of extended query (Close message is not included)"></p><p>In the extended protocol, the frontend first sends a <a href=#parse-p>Parse</a> message, which contains a textual query string. The query string leaves certain values (must be <em>SQL literals</em>; otherwise a syntax error is reported) unspecified with parameter placeholders (i.e. question mark &lsquo;?&rsquo;). The response is either <a href=#parsecomplete-1>ParseComplete</a> or <a href=#errorresponse-e>ErrorResponse</a>.</p><blockquote><p><strong>Note</strong>: The query string contained in a <a href=#parse-p>Parse</a> message cannot include more than one SQL statement; else a syntax error is reported. This restriction does not exist in the simple-query protocol.</p><p>The query string contained in a <a href=#parse-p>Parse</a> message cannot be a <em>COPY FROM LOCAL</em> SQL statement; else a protocol error is reported. See Section <a href=#copy-local-mode>Copy-Local mode</a>.</p></blockquote><p>If successfully created, a named prepared-statement object lasts till the end of the current session, unless explicitly destroyed. Within a session, the backend can keep track of multiple prepared statements. Existing prepared statements and portals are referenced by names assigned when they were created. The frontend can optimize its behavior when the same query string is used, but different parameters are bound to it (many times), i.e. <em>parse</em> once and then <em>bind</em> & <em>execute</em> many times.</p><p>Once a prepared statement exists, it can be readied for execution using a <a href=#bind-b>Bind</a> message. The <a href=#bind-b>Bind</a> message gives the name of the source prepared statement, the name of the destination portal (empty string denotes the unnamed portal), and the values to use for any parameter placeholders (&rsquo;?&rsquo;) present in the prepared statement. The supplied parameter set must match those needed by the prepared statement.
<a href=#bind-b>Bind</a> also specifies the format to use for any data returned by the query; the format can be specified overall, or per-column. The response is either <a href=#bindcomplete-2>BindComplete</a> or ErrorResponse.</p><blockquote><p><strong>Note</strong>: In Vertica server, there is only one portal. The portal name required in some messages is actually ignored by the backend.</p></blockquote><p>Once a portal exists, it can be executed using an <a href=#execute-e>Execute</a> message. The <a href=#execute-e>Execute</a> message specifies the portal name (empty string denotes the unnamed portal) and a maximum result-row count (Vertica backend ignores this and always fetch all rows). The possible responses to <a href=#execute-e>Execute</a> are the same as those described above for queries issued via simple query protocol, except that Execute doesn&rsquo;t cause ReadyForQuery or RowDescription to be issued, also <a href=#portalsuspended-s>PortalSuspended</a> replaced <a href=#commandcomplete-c>CommandComplete</a> to indicate completion of the source SQL command.</p><p>At completion of each series of extended-query messages, the frontend should issue a <a href=#sync-s>Sync</a> message. This parameterless message causes the backend to close the current transaction if it&rsquo;s not inside a BEGIN/COMMIT transaction block (&ldquo;close&rdquo; meaning to commit if no error, or roll back if error). Then a ReadyForQuery response is issued. The purpose of <a href=#sync-s>Sync</a> is to provide a resynchronization point for error recovery. When an error is detected while processing any extended-query message, the backend issues ErrorResponse, then reads and discards messages until a <a href=#sync-s>Sync</a> is reached, then issues ReadyForQuery and returns to normal message processing. (But note that no skipping occurs if an error is detected while processing Sync — this ensures that there is one and only one ReadyForQuery sent for each Sync.)</p><p>In most scenarios the frontend should issue a <a href=#describe-d>Describe</a> before issuing <a href=#execute-e>Execute</a>, to ensure that it knows how to interpret the results it will get back. The <a href=#describe-d>Describe</a> message (statement variant) specifies the name of an existing prepared statement. The response is a <a href=#parameterdescription-t>ParameterDescription</a> message describing the parameters needed by the statement, followed by a <a href=#rowdescription-t>RowDescription</a> message describing the rows that will be returned when the statement is eventually executed (or a <a href=#nodata-n>NoData</a> message if the #copy-operationsandDescription](Front_End_/<em>Back_End_Protocol#CommandDescription</em>.27m.27 &ldquo;wikilink&rdquo;) message describing the type of command to be executed and any semantically-equivalent COPY statement. ErrorResponse is issued if there is no such prepared statement. Note that since <a href=#bind-b>Bind</a> has not yet been issued, the formats to be used for returned columns are not yet known to the backend; the format code fields in the <a href=#rowdescription-t>RowDescription</a> message will be zeroes in this case. The <a href=#describe-d>Describe</a> message (portal variant) specifies the name of an existing portal (or #copy-operations a <a href=#rowdescription-t>RowDescription</a> message describing the rows that will be r#emptyqueryresponse-i_Protocol#NoData_.27n.27 &ldquo;wikilink&rdquo;) message if the portal does not #copy-operationsif there is no such portal.</p><p>The <a href=#close-c>Close</a> message closes an existing prepared statement or portal and releases resources. It is not an error to issue Close against a nonexistent statement or portal name. The response is normally <a href=#closecomplete-3>CloseComplete</a>, but could be ErrorResponse if some difficulty is encountered while releasing resources. Note that closing a prepared statement implicitly closes any open portals that were constructed from that statement.</p><p>The <a href=#flush-h>Flush</a> message does not cause any specific output to be generated, but forces the backend to deliver any data pending in its output buffers. A <a href=#flush-h>Flush</a> must be sent after any extended-query command except <a href=#sync-s>Sync</a>, if the frontend wishes to examine the results of that command before issuing more commands. Without <a href=#flush-h>Flush</a>, messages returned by the backend will be combined into the minimum possible number of packets to minimize network overhead.</p><h3 id=copy-operations>COPY Operations</h3><p>The COPY command allows high-speed bulk data transfer from the client to the server. COPY operations can be divided into <em>copy-local</em> mode (it is further divided into <em>copy-local-stdin</em> mode and <em>copy-local-file</em> mode) and <em>copy-stdin</em> mode.</p><h4 id=copy-local-mode>Copy-Local mode</h4><p>Copy-local mode is initiated when the backend executes a <em>COPY FROM LOCAL FILES</em> or <em>COPY FROM LOCAL STDIN</em> SQL statement in <a href=#query-q>Query</a> message. The backend sends a <a href=#rowdescription-t>RowDescription</a> message (For the DataRow message later indicating the number of rows loaded.) and a <a href=#verifyfiles-f>VerifyFiles</a> message to the fron#copy-operationsnd, and sends them back to the frontend in <a href=#verifyfiles-f>VerifyFiles</a> message. If COPY command uses the REJECTED DATA and/or EXCEPTIONS parameters, VerifyFiles message contains filenames for them. In <em>copy-local-file</em> mode, VerifyFiles message also contains input filenames. The frontend has to verify that these input files exist and are readable, and rejected data and exceptions files are writable.</p><p>Then the frontend should send a [VerifiedFile#emptyqueryresponse-imessage specifying a list of input files that the backend can ask to load. In <em>copy-local-stdin</em> mode, this is an empty list. In <em>copy-local-file</em> mode, this must be a non-empty list, because sending an empty list of files will make server kill the session. If the backend does not send a ErrorResponse, it is ready to copy data from STDIN/files. The backend might send <a href=#parameterstatus-s>ParameterStatus</a> messages, then</p><ul><li>In <em>copy-local-file</em> mode, for each file to load, the backend sends a <a href=#loadfile-h>LoadFile</a> message to ask for data from a file. The frontend should then send zero or more <a href=#copydata-d>CopyData</a> messages, forming a stream of input data. The message boundaries are not required to have anything to do with row boundaries, although that is often a reasonable choice. The frontend should send a <a href=#endofbatchrequest-j>EndOfBatchRequest</a> message to indicate that a batch of rows has been sent, and the frontend is expecting an acknowledgment and possibly rejected row descriptions from the backend. The backend should then send zero or more <a href=#writefile-o>WriteFile</a> messages for rejected row descriptions and a <a href=#endofbatchresponse-j>EndOfBatchResponse</a> message for acknowledgement of data loading from this file. When the backend finishes asking for data from all files, it sends a <a href=#copydoneresponse-c>CopyDoneResponse</a> message.</li></ul><figure><img src=../../images/data-protocols-formats/frontent-backend/CopyLocalFile_Msg_flow.png title="Example message flow of COPY FROM LOCAL FILE" width=400 alt="Example message flow of COPY FROM LOCAL FILE"><figcaption aria-hidden=true>Example message flow of COPY FROM LOCAL FILE</figcaption></figure><ul><li>In <em>copy-local-stdin</em> mode, the backend sends a <a href=#copyinresponse-g>CopyInResponse</a> message to the frontend to ask for data. Same as in <em>copy-local-file</em> mode, the frontend should send zero or more [#verifyfiles-fkilink") messages, forming a stream of input data, and a <a href=#endofbatchrequest-j>EndOfBatchRequest</a> message and then receive zero or more [WriteFile](F#copy-operations_/_Back_End_Protocol#En#copy-local-modede, there will be no incoming message until the frontend send a <a href=#copydone-c>CopyDone</a> message to end this STDIN loading.</li></ul><figure><img src=../../images/data-protocols-formats/frontent-backend/CopyLocalStdin_Msg_flow.png title="Example message flow of COPY FROM LOCAL STDIN" width=350 alt="Example message flow of COPY FROM LOCAL STDIN"><figcaption aria-hidden=true>Example message flow of COPY FROM LOCAL STDIN<figcaption></figure><blockquote><p><strong>Security concerns</strong>: The frontend must verify the file the backend asks for reading (<a href=#loadfile-h>LoadFile</a>) or writing (<a href=#writefile-o>WriteFile</a> is not tampered.</p></blockquote><p>After loading all the data, the backend sends a <a href=#datarow-d>DataRow</a> message indicating the number of rows loaded, and then a <a href=#commandcomplete-c>CommandComplete</a> message indicating the end of the COPY command. The query string might contain multiple SQL commands, the backend will return to the command-processing mode of <a href=#simple-query>Simple Query protocol</a> when a COPY command ended#emptyqueryresponse-ite.</p><p>In the event of a frontend-detected error during <em>copy-local</em> mode, the frontend can terminate it by sending a <a href=#copyerror-e>CopyError</a> message, which will cause the COPY SQL statement to fail with an ErrorResponse. In the event of a backend-detected error (including receipt of a CopyError message), the backend will issue an ErrorResponse message, any subsequent messages issued by the frontend will simply be dropped, and ReadyForQuery is issued.</p><h4 id=copy-stdin-mode>Copy-Stdin mode</h4><p>This protocol comes from PostgreSQL and is (partially) supported in Vertica server but not implemented by most Vertica clients. The backend cannot report the number of rows loaded after copy, and possibly rejected row descriptions.</p><p>Copy-stdin mode is initiated when the backend executes a <em>COPY FROM STDIN</em> SQL statement (not &ldquo;COPY FROM LOCAL STDIN&rdquo;) in a <a href=#query-q>Query</a> message. The backend might send <a href=#parameterstatus-s>ParameterStatus</a> messages, and then a <a href=#copyinresponse-g>CopyInResponse</a> message to the frontend to ask for data. The frontend should send zero or more <a href=#copydata-d>CopyData</a> messages, forming a stream of input data, and a [CopyDone](Front_End_/<em>Back_End_Protocol#CopyDone</em>.27c.27 &ldquo;wi#endofbatchrequest-jcess the command and send a <a href=#commandcomplete-c>CommandComplete</a> message indicating the end of the COPY command. The query string might contain multiple SQL commands, the backend will return to the command-processing mode of <a href=#simple-query>Simple Query protocol</a> when a COPY command ended. ReadyForQuery will always be sent when the query string is complete.</p><p><img src=../../images/data-protocols-formats/frontent-backend/CopyStdin_Msg_flow.png alt="Example message flow of COPY FROM STDIN"></p><p>In the event of a frontend-detected error during <em>copy-stdin</em> mode, the frontend can terminate it by sending a <a href=#copyfail-f>CopyFail</a> or a <a href=#copyerror-e>CopyError</a> message, which will cause the COPY SQL statement to fail with an ErrorResponse. In the event of a backend-detected error (including receipt of a CopyFail or a CopyError message), the backend will issue an ErrorResponse message, any subsequent CopyData, CopyDone, CopyFail or CopyError messages issued by the frontend will simply be dropped, and ReadyForQuery is issued.</p><p>Copy-stdin mode can also be initiated via <a href=#extended-query>Extended Query protocol</a>, the COPY command is issued in a <a href=#parse-p>Parse</a> message. The workflow is the same a#commandcomplete-c of <a href=#extended-query>Extended Query protocol</a> except that the backend should send a <a href=#copyinresponse-g>CopyInResponse</a> message after receiving an <a href=#execute-e>Execute</a> message. Then the frontend should send zero or more <a href=#copydata-d>CopyData</a> or <a href=#copyfail-f>CopyFail</a>/<a href=#copyerror-e>CopyError</a> #verifyfiles-fons</p><h3 id=asynchronous-operations>Asynchronous Operations</h3><p>There are several cases in which the backend will send messages that are not specifically prompted by the frontend&rsquo;s command stream. Frontends must be prepared to deal with these messages at any time, even when not engaged in a query.</p><dl><dt><a href=#noticeresponse-n>NoticeResponse</a></dt><dd>It is possible for NoticeResponse messages to be generated due to outside activity; for example, if the database administrator commands a &ldquo;fast&rdquo; database shutdown, the backend will send a NoticeResponse indicating this fact before closing the connection. Accordingly, frontends should always be prepared to accept and display NoticeResponse messages, even when the connection is nominally idle.</dd><dt><a href=#parameterstatus-s>ParameterStatus</a></dt><dd>ParameterStatus messages will be generated whenever the active value changes for any of the parameters the backend believes the frontend should know about. For example, when you do <code>SET SESSION AUTOCOMMIT ON | OFF</code>, you get back a ParameterStatus telling you the new value of autocommit.</dd><dd>At present Vertica supports a handful of parameters for which ParameterStatus will be generated, they are: <em>standard_conforming_strings</em>, <em>server_version</em>, <em>client_locale</em>, <em>client_label</em>, <em>long_string_types</em>, <em>protocol_version</em>, <em>auto_commit</em>, <em>mars</em>, etc.</dd><dd>More parameters might be added in the future. A frontend should simply ignore ParameterStatus for parameters that it does not understand or care about.</dd></dl><h3 id=canceling-requests-in-progress>Canceling Requests in Progress</h3><p>During the processing of a query, the frontend might request cancellation of the query. The cancel request is not sent directly on the open connection to the backend for reasons of implementation efficiency: we don&rsquo;t want to have the backend constantly checking for new input from the frontend during query processing. Cancel requests should be relatively infrequent, so we make them slightly cumbersome in order to avoid a penalty in the normal case.</p><p>To issue a cancel request, the frontend opens a new connection to the server and sends a <a href=#cancelrequest>CancelRequest</a> message, rather than the Startup message that would ordinarily be sent across a new connection. The server will process this request and then close the connection. For security reasons, no direct reply is made to the cancel request message.</p><p>A <a href=#cancelrequest>CancelRequest</a> message will be ignored unless it contains the same key data (PID and secret key) passed to the frontend during connection start-up. If the request matches the PID and secret key for a currently executing backend, the processing of the current query is aborted.</p><p>The cancellation signal might or might not have any effect — for example, if it arrives after the backend has finished processing the query, then it will have no effect. If the cancellation is effective, it results in the current command being terminated early with an error message saying &ldquo;Execution canceled by operator&rdquo;.</p><p>The upshot of all this is that for reasons of both security and efficiency, the frontend has no direct way to tell whether a cancel request has succeeded. It must continue to wait for the backend to respond to the query. Issuing a cancel simply improves the odds that the current query will finish soon, and improves the odds that it will fail with an error message instead of succeeding.</p><p>Since the cancel request is sent across a new connection to the server and not across the regular frontend/backend communication link, it is possible for the cancel request to be issued by any process, not just the frontend whose query is to be canceled. This might provide additional flexibility when building multiple-process applications. It also introduces a security risk, in that unauthorized persons might try to cancel queries. The security risk is addressed by requiring a dynamically generated secret key to be supplied in <a href=#cancelrequest>CancelRequest</a>.</p><h3 id=termination>Termination</h3><p>The normal, graceful termination procedure is that the frontend sends a <a href=#terminate-x>Terminate</a> message and immediately closes the connection. On receipt of this message, the backend closes the connection and terminates.</p><p>In rare cases (such as an administrator-commanded database shutdown) the backend might disconnect without any frontend request to do so. In such cases the backend will attempt to send an <a href=#errorresponse-e>ErrorResponse</a> or <a href=#noticeresponse-n>NoticeResponse</a> message giving the reason for the disconnection before it closes the connection.</p><h2 id=message-data-types>Message Data Types</h2><p>This section describes the base data types used in messages.</p><dl><dt>Int<i>n</i>(<i>i</i>)</dt><dd>An <strong><i>n</i></strong>-bit integer in network byte order (most significant byte first). If <strong><i>i</i></strong> is specified it is the exact value that will appear, otherwise the value is variable. Eg. Int16, Int32(42).</dd><dt>Int<i>n</i>[<i>k</i>]</dt><dd>An array of <strong><i>k</i></strong> <strong><i>n</i></strong>-bit integers, each in network byte order. The array length <strong><i>k</i></strong> is always determined by an earlier field in the message. Eg. Int16[M].</dd><dt>String(<i>s</i>)</dt><dd>A null-terminated string (C-style string). There is no specific length limitation on strings. If <strong><i>s</i></strong> is specified it is the exact value that will appear, otherwise the value is variable. Eg. String, String(&ldquo;user&rdquo;).</dd></dl><blockquote><p>Note: There is no predefined limit on the length of a string that can be returned by the backend. Good coding strategy for a frontend is to use an expandable buffer so that anything that fits in memory can be accepted. If that&rsquo;s not feasible, read the full string and discard trailing characters that don&rsquo;t fit into your fixed-size buffer.</p></blockquote><dl><dt>String[<i>k</i>]</dt><dd>An array of <strong><i>k</i></strong> null-terminated strings (C-style strings). The array length <strong><i>k</i></strong> is always determined by an earlier field in the message. Eg. String[N].</dd><dt>Byte<i>n</i>(<i>c</i>)</dt><dd>Exactly <strong><i>n</i></strong> bytes. If the field width <strong><i>n</i></strong> is not a constant, it is always determinable from an earlier field in the message. If <strong><i>c</i></strong> is specified it is the exact value. Eg. Byte2, Byte1(&rsquo;\n&rsquo;).</dd></dl><h2 id=message-formats>Message Formats</h2><p>This section describes the detailed format of each message. Each message is classified to indicate that it may be sent by a frontend (client), or a backend (server). In most cases, the first byte of a message identifies the message type, and the next four bytes specify the length of the rest of the message (this length count includes itself, but not the message-type byte). The remaining contents of the message are determined by the message type. There are a few message types that have no initial message-type byte.</p><h3 id=frontend>Frontend</h3><h4 id=bind-b>Bind &lsquo;B&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;B&rsquo;)</td><td style=text-align:left>Identifies the message as a Bind command.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>String</td><td style=text-align:left>The name of the destination portal (an empty string selects the unnamed portal).</td></tr><tr><td style=text-align:left>String</td><td style=text-align:left>The name of the source prepared statement (an empty string selects the unnamed prepared statement).</td></tr><tr><td style=text-align:left>Int16</td><td style=text-align:left>The number of parameter format codes that follow (denoted <em><strong>C</strong></em> below). This can be zero to indicate that there are no parameters or that the parameters all use the default format (text); or one, in which case the specified format code is applied to all parameters; or it can equal the actual number of parameters.</td></tr><tr><td style=text-align:left>Int16[<em><strong>C</strong></em>]</td><td style=text-align:left>The parameter format codes. Each must presently be zero (text) or one (binary).</td></tr><tr><td style=text-align:left>Int16</td><td style=text-align:left>The number of parameter values that follow (possibly zero) (denoted <em><strong>P</strong></em> below). This must match the number of parameters needed by the query.</td></tr><tr><td style=text-align:left>Int32[<em><strong>P</strong></em>]</td><td style=text-align:left>The parameter type Oids.</td></tr><tr><td style=text-align:left>Next, the following pair of fields appear for each parameter:<td colspan=2></td><td style=text-align:left></td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>The length of the parameter value, in bytes (this count does not include itself) (denoted <em><strong>n</strong></em> below). Can be zero. As a special case, -1 indicates a <em>NULL</em> parameter value. No value bytes follow in the <em>NULL</em> case.</td></tr><tr><td style=text-align:left>Byte<em><strong>n</strong></em></td><td style=text-align:left>The value of the parameter, in the format indicated by the associated format code.</td></tr><tr><td style=text-align:left>After the last parameter, the following fields appear:</td><td style=text-align:left></td></tr><tr><td style=text-align:left>Int16</td><td style=text-align:left>The number of result-column format codes that follow (denoted <em><strong>R</strong></em> below). This can be zero to indicate that there are no result columns or that the result columns should all use the default format (text); or one, in which case the specified format code is applied to all result columns (if any); or it can equal the actual number of result columns of the query.</td></tr><tr><td style=text-align:left>Int16[<em><strong>R</strong></em>]</td><td style=text-align:left>The result-column format codes. Each must presently be zero (text) or one (binary).</td></tr></tbody></table><h4 id=cancelrequest>CancelRequest</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Int32(16)</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>Int32(80877102)</td><td style=text-align:left>The cancel request code. The value is chosen to contain <em>1234</em> in the most significant 16 bits, and <em>5678</em> in the least 16 significant bits. (To avoid confusion, this code must not be the same as any protocol version number.)</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>The process ID of the target backend.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>The secret key for the target backend.</td></tr></tbody></table><h4 id=changepassword-n>ChangePassword &rsquo;n&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&rsquo;n&rsquo;)</td><td style=text-align:left>Identifies the message as a ChangePassword command.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>String</td><td style=text-align:left>The new password.</td></tr></tbody></table><h4 id=close-c>Close &lsquo;C&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;C&rsquo;)</td><td style=text-align:left>Identifies the message as a Close command.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>Byte1</td><td style=text-align:left>&lsquo;S&rsquo; to close a prepared statement; or &lsquo;P&rsquo; to close a portal.</td></tr><tr><td style=text-align:left>String</td><td style=text-align:left>The name of the prepared statement or portal to close (an empty string selects the unnamed prepared statement or portal).</td></tr></tbody></table><h4 id=copydata-d>CopyData &rsquo;d&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&rsquo;d&rsquo;)</td><td style=text-align:left>Identifies the message as COPY data.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>Byte<em><strong>n</strong></em></td><td style=text-align:left>Data that forms part of a COPY data stream. Messages sent by frontends may divide the data stream arbitrarily.</td></tr></tbody></table><h4 id=copydone-c>CopyDone &lsquo;c&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;c&rsquo;)</td><td style=text-align:left>Identifies the message as a COPY-complete indicator. Note: This is different from a <a href=#copydoneresponse-c>CopyDoneResponse</a> backend message.</td></tr><tr><td style=text-align:left>Int32(4)</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr></tbody></table><h4 id=copyerror-e>CopyError &rsquo;e&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&rsquo;e&rsquo;)</td><td style=text-align:left>Identifies the message as a copy error. Terminate the Copy-Local protocol.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>String</td><td style=text-align:left>Error file name.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>Error line number.</td></tr><tr><td style=text-align:left>String</td><td style=text-align:left>Error method name.</td></tr><tr><td style=text-align:left>String</td><td style=text-align:left>Error message.</td></tr></tbody></table><h4 id=copyfail-f>CopyFail &lsquo;f&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;f&rsquo;)</td><td style=text-align:left>Identifies the message as a COPY-failure indicator.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>String</td><td style=text-align:left>An error message to report as the cause of failure.</td></tr></tbody></table><h4 id=describe-d>Describe &lsquo;D&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;D&rsquo;)</td><td style=text-align:left>Identifies the message as a Describe command.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>Byte1</td><td style=text-align:left>&lsquo;S&rsquo; to describe a prepared statement; or &lsquo;P&rsquo; to describe a portal.</td></tr><tr><td style=text-align:left>String</td><td style=text-align:left>The name of the prepared statement or portal to describe (an empty string selects the unnamed prepared statement or portal).</td></tr></tbody></table><h4 id=endofbatchrequest-j>EndOfBatchRequest &lsquo;j&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;j&rsquo;)</td><td style=text-align:left>Identifies the message as a EndOfBatchRequest command. Signals that a batch of rows has been sent, and the client is expecting an acknowledgment and possibly rejected row descriptions from the server.</td></tr><tr><td style=text-align:left>Int32(4)</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr></tbody></table><h4 id=execute-e>Execute &lsquo;E&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;E&rsquo;)</td><td style=text-align:left>Identifies the message as an Execute command.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>String</td><td style=text-align:left>The name of the portal to execute (an empty string selects the unnamed portal).</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>Maximum number of rows to return, if portal contains a query that returns rows (ignored otherwise). Zero denotes &ldquo;no limit&rdquo;. <em><strong>Note</strong></em>: Currently, Vertica backend will ignore this result-row count and send all the rows regardless of what you put here.</td></tr></tbody></table><h4 id=flush-h>Flush &lsquo;H&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;H&rsquo;)</td><td style=text-align:left>Identifies the message as a Flush command.</td></tr><tr><td style=text-align:left>Int32(4)</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr></tbody></table><h4 id=loadbalancerequest>LoadBalanceRequest</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Int32(8)</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>Int32(80936960)</td><td style=text-align:left>The LoadBalance request code. The value is chosen to contain <em>1235</em> in the most significant 16 bits, and <em>0000</em> in the least 16 significant bits. (To avoid confusion, this code must not be the same as any protocol version number.)</td></tr></tbody></table><h4 id=marsrequest-_>MarsRequest &lsquo;_&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&rsquo;_&rsquo;)</td><td style=text-align:left>Identifies the message as a MARS request.</td></tr><tr><td style=text-align:left>Int32(20)</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>ResultSet ID</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>RequestType: Fetch(0x1) Close(0x2) NoRowDesc(0x4)</td></tr><tr><td style=text-align:left>Int64</td><td style=text-align:left>FetchCount</td></tr></tbody></table><h4 id=parse-p>Parse &lsquo;P&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;P&rsquo;)</td><td style=text-align:left>Identifies the message as a Parse command.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>String</td><td style=text-align:left>The name of the destination prepared statement (an empty string selects the unnamed portal, i.e. prepared statement must be named).</td></tr><tr><td style=text-align:left>String</td><td style=text-align:left>The query string to be parsed.</td></tr><tr><td style=text-align:left>Int16</td><td style=text-align:left>The number of parameter data types specified (may be zero). Note that this is not an indication of the number of parameters that might appear in the query string, only the number that the frontend wants to pre-specify types for.</td></tr><tr><td style=text-align:left>Then, for each parameter, there is the following:</td><td style=text-align:left></td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>Specifies the object ID of the parameter data type. Placing a zero here is equivalent to leaving the type unspecified. The server will ignore these values.</td></tr></tbody></table><h4 id=password-p>Password &lsquo;p&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;p&rsquo;)</td><td style=text-align:left>Identifies the message as a password.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>String</td><td style=text-align:left>The password (encrypted, if requested). All password strings processed by Vertica require a null terminator, as is standard with any string in the Front End / Back End protocol. GSS is special because Vertica doesn&rsquo;t touch the buffer it gets &ndash; it defers to the GSS library instead. It is an error to send an extra null terminator in a GSS token message.</td></tr></tbody></table><h4 id=query-q>Query &lsquo;Q&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;Q&rsquo;)</td><td style=text-align:left>Identifies the message as a simple query.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>String</td><td style=text-align:left>The query string itself.</td></tr></tbody></table><h4 id=sslrequest-8>SSLRequest &lsquo;8&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Int32(8)</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>Int32(80877103)</td><td style=text-align:left>The SSL request code. The value is chosen to contain <em>1234</em> in the most significant 16 bits, and <em>5679</em> in the least 16 significant bits. (To avoid confusion, this code must not be the same as any protocol version number.)</td></tr></tbody></table><h4 id=startuprequest>StartupRequest</h4><table><thead><tr><th><p>Type</p></th><th><p>Description</p></th></tr></thead><tbody><tr><td><p>Int32</p></td><td><p>Length of message contents in bytes, including self.</p></td></tr><tr><td><p>Int32</p></td><td><p>The <strong>fixed</strong> protocol version number. The most significant 16 bits are the major version number. The least significant 16 bits are the minor version number. For example, protocol version number 3.8 should be described as (3 &lt;&lt; 16 | 8) = 196616.</p><p>Frontend and backend must negotiate and use the same protocol version for communication. For historical reasons, in this message, there are two protocol version numbers send to the backend: <strong>fixed</strong> protocol version and <strong>requested</strong> protocol version. The behavior depends on the protocol version of the backend:</p><ul><li>New servers (protocol version >= 3.7)</li></ul><dl><dt></dt><dd><dl><dt></dt><dd>The backend would use the frontend's requested protocol version to find
the highest common protocol version in use for both frontend and
backend, and send this effective protocol version back in a <a href=#parameterstatus>ParameterStatus</a> message, with parameter name
'protocol_version'. The frontend can use this value to enable/disable
functionalities.</dd></dl></dd></dl><ul><li>Old servers (protocol version &lt; 3.7)</li></ul><dl><dt></dt><dd><dl><dt></dt><dd>The backend ignores the requested version and only looks at the fixed
protocol version. The backend accepts the connection if frontend's
protocol version is equal or older than the backend's.</dd></dl></dd></dl></td></tr><tr><td colspan=2><p>Next, the following pair of fields appears for each parameter. Parameters can appear in any order.</p></td><td></td></tr><tr><td><p>String</p></td><td><p>The parameter name. The following table contains the definition
for currently recognized parameter names:</p><table><thead><tr><th><p>Parameter name</p></th><th><p>Description</p></th></tr></thead><tbody><tr><td>user</td><td><p>The database user name to connect as. This is required unless a value is supplied for oauth_access_token, in which case the user can be an empty string. Otherwise it is required. There is no default.</p></td></tr><tr><td><p>database</p></td><td><p>The database to connect to.</p></td></tr><tr><td>protocol_version</td><td><p>The <strong>requested</strong> protocol version number, which is the highest version the frontend supports.</p></td></tr><tr><td>binary_data_protocol</td><td><p>'0' is the default. If set to '1', enable this session-level setting. For additional details, see <a href=#formats-formatcodes>Formats and Format Codes</a>.</p></td></tr><tr><tdr><td><p>autocommit</p></td><td><p>'off' is the default. If set to 'on', enable AUTOCOMMIT setting.</p></td></tr><tr><tdtd></tr><td>client_label</td><td><p>The client connection label. You can use this label to distinguish client connections.</p></td></tr><tr><td>client_type</td><td><p>A string distinguish the type of this client. E.g. "JDBC Driver", "ADO.NET Driver".</p></td></tr><tr><td>client_version</td><td><p>A string distinguish the version of this client. Note that this is not required to follow the Vertica version number scheme. The open source drivers vertica-python and vertica-sql-go have independent version numbers.</p></td></tr><tr><tdr><td><p>client_pid</p></td><td><p>A string distinguish the process ID of this client.</p></td></tr><tr><td>client_os</td><td><p>A string distinguish the client's OS platform.</p></td></tr><tr><td>client_os_user_name</td><td><p>A string distinguish the OS login username of this client.</p></td></tr><tr><td>client_os_hostname</td><td><p>A string distinguish the OS hostname of this client.</p></td></tr><tr><td>mars</td><td><p>'off' is the default. If set to 'on', enable MARS setting.</p></td></tr><tr><td>oauth_access_token</td><td><p>An OAuth token that authorizes a user to the database. Specifying a value triggers <a href=#oauth2-authentication>OAuth authentication</a>.</p></td></tr><tr><td>auth_category</td><td><p>A string indicating the type of authentication the client is prepared to do. Recognized values are "User", "Kerberos" and "OAuth". Specify only one type at a time.</p></td></tr><tr><td>protocol_features</td><td><p>A JSON string of features requested by the driver. Each feature will return a ParameterStatus message. Currently supports the following features:
'request_complex_types' - false is the default. If set to true, server will return complex type metadata. Otherwise, complex types will be treated as long varchar. Example value: {"request_complex_types":true}</p></td></tr><tr><td>protocol_compat</td><td><p>A string representing the protocol that the driver is able to understand. Used in postgres compatibility. The server will try and determine the type of driver and which protocol to be used. If this parameter is provided, the server will defer to the value given instead of determining which protocol to use on its own. This may be used in conversion and extension of PG drivers to understand parts of the Vertica protocol.<br>Currently recognized values for protocol_compat are "PG" or "VER" for Postgres and Vertica respectively. If no parameter is passed, the server will attempt to determine the value based on other parameters provided.</p></td></tr></tbody></table></td></tr><tr><td>String</td><td>The parameter value. Most parameter values are of type String
except for the <strong>protocol_version</strong> parameter. It is of
type Int32 followed by an extra null terminator ('\0').</p></td></tr><tr><td colspan=2><p>And finally:</p></td><td></td></tr><tr><td>Byte1('\0')</td><td><p>A zero byte is required as a terminator after the last name/value
pair.</p></td></tr></table><h4 id=sync-s>Sync &lsquo;S&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;S&rsquo;)</td><td style=text-align:left>Identifies the message as a Sync command.</td></tr><tr><td style=text-align:left>Iength of message contents in bytes, including self.</td><td></td></tr></tbody></table><h4 id=terminate-x>Terminate &lsquo;X&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;X&rsquo;)</td><td style=text-align:left>Identifies the message as a termination.</td></tr><tr><td style=text-align:left>Int32(4)</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr></tbody></table><h4 id=verifiedfiles-f>VerifiedFiles &lsquo;F&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;F&rsquo;)</td><td style=text-align:left>Identifies the message as a response to <a href=#verifyfiles-f>VerifyFiles &lsquo;F&rsquo;</a> message. Provide a list of files that the backend can ask to load.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>Int16</td><td style=text-align:left>The number of files. 0 if copy input is STDIN.</td></tr><tr><td style=text-align:left>Next, the following pair of fields appear for each file:</td><td style=text-align:left></td></tr><tr><td style=text-align:left>String</td><td style=text-align:left>File name. The string is null terminated.</td></tr><tr><td style=text-align:left>Int64</td><td style=text-align:left>File content length in bytes.</td></tr></tbody></table><h3 id=backend>Backend</h3><h4 id=authenticationok-r>AuthenticationOk &lsquo;R&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;R&rsquo;)</td><td style=text-align:left>Identifies the message as an authentication request.</td></tr><tr><td style=text-align:left>Int32(8)</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>Int32(0)</td><td style=text-align:left>Specifies that the authentication was successful.</td></tr></tbody></table><h4 id=authenticationcleartextpassword-r>AuthenticationCleartextPassword &lsquo;R&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;R&rsquo;)</td><td style=text-align:left>Identifies the message as an authentication request.</td></tr><tr><td style=text-align:left>Int32(8)</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>Int32(3)</td><td style=text-align:left>Specifies that a clear-text password is required.</td></tr></tbody></table><h4 id=authenticationmd5password-r>AuthenticationMD5Password &lsquo;R&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;R&rsquo;)</td><td style=text-align:left>Identifies the message as an authentication request.</td></tr><tr><td style=text-align:left>Int32(32)</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>Int32(5)</td><td style=text-align:left>Specifies that an MD5-encrypted password is required. password = MD5(MD5(password + user) + salt)</td></tr><tr><td style=text-align:left>Byte4</td><td style=text-align:left>The salt to use when encrypting the password.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>The user salt length, must equal to 16.</td></tr><tr><td style=text-align:left>Byte16</td><td style=text-align:left>The user salt, but not used.</td></tr></tbody></table><h4 id=authenticationgss-r>AuthenticationGSS &lsquo;R&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;R&rsquo;)</td><td style=text-align:left>Identifies the message as an authentication request.</td></tr><tr><td style=text-align:left>Int32(8)</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>Int32(7)</td><td style=text-align:left>Specifies that GSS authentication is required.</td></tr></tbody></table><h4 id=authenticationgsscontinue-r>AuthenticationGSSContinue &lsquo;R&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;R&rsquo;)</td><td style=text-align:left>Identifies the message as an authentication request.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>Int32(8)</td><td style=text-align:left>Specifies that GSS authentication continue is required.</td></tr><tr><td style=text-align:left>Byte<strong>n</strong></td><td style=text-align:left>GSS data, which should be passed into an authGSSClientStep.</td></tr></tbody></table><h4 id=authenticationpasswordexpired-r>AuthenticationPasswordExpired &lsquo;R&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;R&rsquo;)</td><td style=text-align:left>Identifies the message as an authentication request.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>Int32(9)</td><td style=text-align:left>Specifies that the password is expired.</td></tr><tr><td style=text-align:left>Int32[<strong>n</strong>]</td><td style=text-align:left>A bunch of integers that represent some restrictions on the password (min/max length, character classes, etc).</td></tr></tbody></table><h4 id=authenticationpasswordchanged-r>AuthenticationPasswordChanged &lsquo;R&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;R&rsquo;)</td><td style=text-align:left>Identifies the message as an authentication request.</td></tr><tr><td style=text-align:left>Int32(8)</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>Int32(10)</td><td style=text-align:left>Specifies that the password is changed.</td></tr></tbody></table><h4 id=authenticationpasswordgrace-r>AuthenticationPasswordGrace &lsquo;R&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;R&rsquo;)</td><td style=text-align:left>Identifies the message as an authentication request.</td></tr><tr><td style=text-align:left>Int32(8)</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>Int32(11)</td><td style=text-align:left>Specifies that the password is in its grace period.</td></tr></tbody></table><h4 id=authenticationoauth-r>AuthenticationOAuth &lsquo;R&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;R&rsquo;)</td><td style=text-align:left>Identifies the message as an authentication request.</td></tr><tr><td style=text-align:left>Int32(8)</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>Int32(11)</td><td style=text-align:left>Specifies that an OAuth access token is required.</td></tr></tbody></table><h4 id=authenticationhashpassword-r>AuthenticationHashPassword &lsquo;R&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;R&rsquo;)</td><td style=text-align:left>Identifies the message as an authentication request.</td></tr><tr><td style=text-align:left>Int32(32)</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>Int32(65536)</td><td style=text-align:left>Specifies that a hashed password is required. password = SHA512(SHA512(password + userSalt) + salt)</td></tr><tr><td style=text-align:left>Byte4</td><td style=text-align:left>The salt to use when encrypting the password.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>The user salt length, must equal to 16.</td></tr><tr><td style=text-align:left>Byte16</td><td style=text-align:left>The user salt.</td></tr></tbody></table><h4 id=authenticationhashmd5password-r>AuthenticationHashMD5Password &lsquo;R&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;R&rsquo;)</td><td style=text-align:left>Identifies the message as an authentication request.</td></tr><tr><td style=text-align:left>Int32(32)</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>Int32(65541)</td><td style=text-align:left>Specifies that a hashed MD5-encrypted password is required. password = MD5(MD5(password + user) + salt)</td></tr><tr><td style=text-align:left>Byte4</td><td style=text-align:left>The salt to use when encrypting the password.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>The user salt length, must equal to 16.</td></tr><tr><td style=text-align:left>Byte16</td><td style=text-align:left>The user salt, but not used.</td></tr></tbody></table><h4 id=authenticationhashsha512password-r>AuthenticationHashSHA512Password &lsquo;R&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;R&rsquo;)</td><td style=text-align:left>Identifies the message as an authentication request.</td></tr><tr><td style=text-align:left>Int32(32)</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>Int32(66048)</td><td style=text-align:left>Specifies that a hashed SHA512-encrypted password is required. password = SHA512(SHA512(password + userSalt) + salt)</td></tr><tr><td style=text-align:left>Byte4</td><td style=text-align:left>The salt to use when encrypting the password.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>The user salt length, must equal to 16.</td></tr><tr><td style=text-align:left>Byte16</td><td style=text-align:left>The user salt.</td></tr></tbody></table><h4 id=backendkeydata-k>BackendKeyData &lsquo;K&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;K&rsquo;)</td><td style=text-align:left>Identifies the message as cancellation key data. The frontend must save these values if it wishes to be able to issue <a href=#cancelrequest>CancelRequest</a> messages later.</td></tr><tr><td style=text-align:left>Int32(12)</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>The process ID of this backend.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>The secret key of this backend.</td></tr></tbody></table><h4 id=bindcomplete-2>BindComplete &lsquo;2&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;2&rsquo;)</td><td style=text-align:left>Identifies the message as a Bind-complete indicator.</td></tr><tr><td style=text-align:left>Int32(4)</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr></tbody></table><h4 id=closecomplete-3>CloseComplete &lsquo;3&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;3&rsquo;)</td><td style=text-align:left>Identifies the message as a Close-complete indicator.</td></tr><tr><td style=text-align:left>Int32(4)</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr></tbody></table><h4 id=commandcomplete-c>CommandComplete &lsquo;C&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;C&rsquo;)</td><td style=text-align:left>Identifies the message as a command-completed response.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>String</td><td style=text-align:left>The command tag. This is usually a single word that identifies which SQL command was sent.</td></tr></tbody></table><h4 id=commanddescription-m>CommandDescription &rsquo;m&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&rsquo;m&rsquo;)</td><td style=text-align:left>Identifies the message as a command description.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>String</td><td style=text-align:left>The command tag. This is usually a single word that identifies which SQL command was sent.</td></tr><tr><td style=text-align:left>Int16</td><td style=text-align:left>1 if command was a prepared INSERT that can be converted to a COPY STDIN statement; 0 otherwise.</td></tr><tr><td style=text-align:left>String</td><td style=text-align:left>The COPY STDIN statement if it was possible to convert the prepared INSERT into a COPY.</td></tr></tbody></table><h4 id=copydoneresponse-c>CopyDoneResponse &lsquo;c&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;c&rsquo;)</td><td style=text-align:left>Identifies the message as a Copy done response for &ldquo;COPY FROM LOCAL FILES&rdquo; command. Note: This is different from a <a href=#copydone-c>CopyDone</a> frontend message.</td></tr><tr><td style=text-align:left>Int32(4)</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr></tbody></table><h4 id=copyinresponse-g>CopyInResponse &lsquo;G&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;G&rsquo;)</td><td style=text-align:left>Identifies the message as a Start Copy In response.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>Int8</td><td style=text-align:left>0 indicates the overall COPY format is textual (rows separated by newlines, columns separated by separator characters, etc). 1 indicates the overall copy format is binary (similar to DataRow format).</td></tr><tr><td style=text-align:left>Int16</td><td style=text-align:left>The number of columns in the data to be copied (denoted <em><strong>N</strong></em> below).</td></tr><tr><td style=text-align:left>Int16[<em><strong>N</strong></em>]</td><td style=text-align:left>The format codes to be used for each column. Each must presently be zero (text) or one (binary). All must be zero if the overall copy format is textual.</td></tr></tbody></table><h4 id=datarow-d>DataRow &lsquo;D&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;D&rsquo;)</td><td style=text-align:left>Identifies the message as a data row.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>Int16</td><td style=text-align:left>The number of column values that follow (possibly zero).</td></tr><tr><td style=text-align:left>Next, the following pair of fields appear for each column:</td><td style=text-align:left></td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>The length of the column value, in bytes (this count does not include itself) (denoted <em><strong>n</strong></em> below). Can be zero. As a special case, -1 indicates a <em>NULL</em> column value. No value bytes follow in the <em>NULL</em> case.</td></tr><tr><td style=text-align:left>Byte<em><strong>n</strong></em></td><td style=text-align:left>The value of the column, in the format indicated by the associated <a href=#formats-and-format-codes>format code</a>.</td></tr></tbody></table><h4 id=emptyqueryresponse-i>EmptyQueryResponse &lsquo;I&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;I&rsquo;)</td><td style=text-align:left>Identifies the message as a response to an empty query string. This substitutes for <a href=#commandcomplete-c>CommandComplete</a> message.</td></tr><tr><td style=text-align:left>Int32(4)</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr></tbody></table><h4 id=endofbatchresponse-j>EndOfBatchResponse &lsquo;J&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;J&rsquo;)</td><td style=text-align:left>Signals that the server is done sending back rejected rows, and is ready for the next set of rows to be sent (or the copy end message).</td></tr><tr><td style=text-align:left>Int32(4)</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr></tbody></table><h4 id=errorresponse-e>ErrorResponse &lsquo;E&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;E&rsquo;)</td><td style=text-align:left>Identifies the message as an error.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>The message body consists of one or more identified fields, followed by a zero byte as a terminator. Fields may appear in any order. For each field there is the following:</td><td style=text-align:left></td></tr><tr><td style=text-align:left>Byte1</td><td style=text-align:left>A code identifying the field type; if zero, this is the message terminator and no string follows. The presently defined field types are listed in <a href=#error-and-notice-message-fields>Error and Notice Message Fields</a> section. Since more field types may be added in future, frontends should silently ignore fields of unrecognized type.</td></tr><tr><td style=text-align:left>String</td><td style=text-align:left>The field value.</td></tr></tbody></table><h4 id=loadbalanceresponse-yn>LoadBalanceResponse &lsquo;Y/N&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;N&rsquo;)</td><td style=text-align:left>Identifies the message as a LoadBalance response. The backend <u>rejects</u> the frontend LoadBalance request. Note: This is different from a <a href=#noticeresponse-n>NoticeResponse &lsquo;N&rsquo;</a> message.</td></tr></tbody></table><p>or</p><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td>Byte1(&lsquo;Y&rsquo;)</td><td>Identifies the message as a LoadBalance response. The backend <u>accepts</u> the frontend LoadBalance request.</td></tr><tr><td>Int32</td><td>Length of message contents in bytes, including self.</td></tr><tr><td>Int32</td><td>The port number of the load balance target.</td></tr><tr><td>String</td><td>The host of the load balance target. The string is null terminated. This is a ip address, not a DNS name</td></tr></tbody></table><h4 id=loadfile-h>LoadFile &lsquo;H&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;H&rsquo;)</td><td style=text-align:left>Identifies the message as a Copy-Local response to load the data from a file.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>String</td><td style=text-align:left>The name of the file to load.</td></tr></tbody></table><h4 id=marsresponse-_>MarsResponse &lsquo;_&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&rsquo;_&rsquo;)</td><td style=text-align:left>Identifies the message as a MARS response.</td></tr><tr><td style=text-align:left>Int32(20)</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>ResultSet ID.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>Status: Created(0x1) Fetched(0x2) Closed(0x4) Canceled(0x8) Error(0x10)</td></tr><tr><td style=text-align:left>Int64</td><td style=text-align:left>Remaining rowcount.</td></tr></tbody></table><h4 id=nodata-n>NoData &rsquo;n&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&rsquo;n&rsquo;)</td><td style=text-align:left>Identifies the message as a no-data indicator. It is a response for transactions/DDL.</td></tr><tr><td style=text-align:left>Int32(4)</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr></tbody></table><h4 id=noticeresponse-n>NoticeResponse &lsquo;N&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;N&rsquo;)</td><td style=text-align:left>Identifies the message as a notice. Note: This is different from a <a href=#loadbalanceresponse-yn>LoadBalanceResponse &lsquo;N&rsquo;</a> message.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>The message body consists of one or more identified fields, followed by a zero byte as a terminator. Fields may appear in any order. For each field there is the following:</td><td style=text-align:left></td></tr><tr><td style=text-align:left>Byte1</td><td style=text-align:left>A code identifying the field type; if zero, this is the message terminator and no string follows. The presently defined field types are listed in <a href=#error-and-notice-message-fields>Error and Notice Message Fields</a> section. Since more field types may be added in future, frontends should silently ignore fields of unrecognized type.</td></tr><tr><td style=text-align:left>String</td><td style=text-align:left>The field value.</td></tr></tbody></table><h4 id=parameterdescription-t>ParameterDescription &rsquo;t&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&rsquo;t&rsquo;)</td><td style=text-align:left>Identifies the message as a parameter description.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>Int16</td><td style=text-align:left>The number of parameters used by the statement (may be zero).</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>The number of elements in the type mapping pool, which is an array. This pool is used for non-native types like GEOMETRY and GEOGRAPHY (They are backed by LONG VARBINARY native type).</td></tr><tr><td style=text-align:left>Then, for each type mapping element in the pool, there is the following:</td><td style=text-align:left></td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>Specifies the base object ID of the non-native data type.</td></tr><tr><td style=text-align:left>String</td><td style=text-align:left>Specifies the name of the non-native data type.</td></tr><tr><td style=text-align:left>Then, for each parameter, there is the following:</td><td></td></tr><tr><td style=text-align:left>Byte1</td><td style=text-align:left>&lsquo;1&rsquo; if the parameter uses the type mapping pool; &lsquo;0&rsquo; otherwise.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>If the parameter uses the type mapping pool, specifies the position (0-indexed) in the type mapping pool. Otherwise, specifies the object ID of the parameter data type.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>Specifies the parameter type modifier.</td></tr><tr><td style=text-align:left>Int16</td><td style=text-align:left>1 if the column has a <em>NOT NULL</em> constraint; 0 otherwise.</td></tr></tbody></table><p><a id=parameterstatus></a></p><h4 id=parameterstatus-s>ParameterStatus &lsquo;S&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;S&rsquo;)</td><td style=text-align:left>Identifies the message as a run-time parameter status report.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>String</td><td style=text-align:left>The name of the run-time parameter being reported.</td></tr><tr><td style=text-align:left>String</td><td style=text-align:left>The current value of the parameter.</td></tr></tbody></table><h4 id=parsecomplete-1>ParseComplete &lsquo;1&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;1&rsquo;)</td><td style=text-align:left>Identifies the message as a Parse-complete indicator.</td></tr><tr><td style=text-align:left>Int32(4)</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr></tbody></table><h4 id=portalsuspended-s>PortalSuspended &rsquo;s&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&rsquo;s&rsquo;)</td><td style=text-align:left>Indicates that a portal has stopped execution.</td></tr><tr><td style=text-align:left>Int32(4)</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr></tbody></table><h4 id=readyforquery-z>ReadyForQuery &lsquo;Z&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;Z&rsquo;)</td><td style=text-align:left>ReadyForQuery is sent whenever the backend is ready for a new query cycle.</td></tr><tr><td style=text-align:left>Int32(5)</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>Byte1</td><td style=text-align:left>Current backend transaction status indicator. Possible values are &lsquo;I&rsquo; if idle (not in a transaction block); &lsquo;T&rsquo; if in a transaction block; or &lsquo;E&rsquo; if in a failed transaction block (queries will be rejected until block is ended).</td></tr></tbody></table><p><a id=rowdescription></a></p><h4 id=rowdescription-t>RowDescription &lsquo;T&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;T&rsquo;)</td><td style=text-align:left>Identifies the message as a row description.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>Int16</td><td style=text-align:left>Specifies the number of fields in a row (may be zero).</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>The number of elements in the type mapping pool, which is an array. This pool is used for non-native types like GEOMETRY and GEOGRAPHY (They are backed by LONG VARBINARY native type).</td></tr><tr><td style=text-align:left>Then, for each type mapping element in the pool, there is the following:</td><td style=text-align:left></td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>Specifies the base object ID of the non-native data type.</td></tr><tr><td style=text-align:left>String</td><td style=text-align:left>Specifies the base object ID of the non-native data type.</td></tr><tr><td style=text-align:left>Then, for each field in a row, there is the following:</td><td style=text-align:left></td></tr><tr><td style=text-align:left>String</td><td style=text-align:left>The field name.</td></tr><tr><td style=text-align:left>Int64</td><td style=text-align:left>If the field can be identified as a column of a specific table, the object ID of the table; otherwise zero. (denoted <strong><em>OID</em></strong> below).</td></tr><tr><td style=text-align:left>String</td><td style=text-align:left>The schema name. Only sent if <strong><em>OID</em></strong> != 0.</td></tr><tr><td style=text-align:left>String</td><td style=text-align:left>The table name. Only sent if <strong><em>OID</em></strong> != 0.</td></tr><tr><td style=text-align:left>Int16</td><td style=text-align:left>If the field can be identified as a column of a specific table, the attribute number of the column; otherwise zero. The &lt;st<strong><em>and the</em></strong>attribute number</em></strong> uniquely identify each field within the scope of a RowDescription message.</td></tr><tr><td style=text-align:left>Int16</td><td style=text-align:left>If the column is a complex type, the <strong><em>attribute number</em></strong> of the field that is considered to be the parent; otherwise zero.<br>For example, an <em>ARRAY[INT]</em> will have one attribute number representing the ARRAY, and another attribute number representing the INT it contains. The INT will have a Parent that refers to the ARRAY.<br><em>New in version 3.10</em>: Before version 3.10, it only returned fields that did not have a parent.</td></tr><tr><td style=text-align:left>Byte1</td><td style=text-align:left>&lsquo;1&rsquo; if the column uses the type mapping pool; &lsquo;0&rsquo; otherwise.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>If the column uses the type mapping pool, specifies the position (0-indexed) in the type mapping pool. Otherwise, specifies the object ID of the column&rsquo;s data type.</td></tr><tr><td style=text-align:left>Int16</td><td style=text-align:left>The data type size.</td></tr><tr><td style=text-align:left>Int16</td><td style=text-align:left>1 if the column can contain null values; 0 otherwise.</td></tr><tr><td style=text-align:left>Int16</td><td style=text-align:left>1 if the column is identity; 0 otherwise.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>The type modifier. The meaning of the modifier is type-specific.</td></tr><tr><td style=text-align:left>Int16</td><td style=text-align:left>The <a href=#formats-and-format-codes>format code</a> being used for the field.</td></tr></tbody></table><h4 id=verifyfiles-f>VerifyFiles &lsquo;F&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;F&rsquo;)</td><td style=text-align:left>Identifies the message as a response to COPY FROM LOCAL command. The backend parses the file names out of the command, and sends them back to the frontend in this message. The frontend has to verify that these files exist and are readable before running the copy</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>Int16</td><td style=text-align:left>The number of files (denoted <em><strong>N</strong></em> below). 0 if copy input is STDIN.</td></tr><tr><td style=text-align:left>String[<em><strong>N</strong></em>]</td><td style=text-align:left>The name of each data file to load.</td></tr><tr><td style=text-align:left>String</td><td style=text-align:left>The file name of Rejects.</td></tr><tr><td style=text-align:left>String</td><td style=text-align:left>The file name of Exceptions.</td></tr></tbody></table><h4 id=writefile-o>WriteFile &lsquo;O&rsquo;</h4><table><thead><tr><th style=text-align:left>Type</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>Byte1(&lsquo;O&rsquo;)</td><td style=text-align:left>Identifies the message as a response to COPY FROM LOCAL command.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>Length of message contents in bytes, including self.</td></tr><tr><td style=text-align:left>String</td><td style=text-align:left>A file name if the command uses the REJECTED DATA and/or EXCEPTIONS parameters. Empty if the command uses the RETURNREJECTED parameters.</td></tr><tr><td style=text-align:left>Int32</td><td style=text-align:left>File length.</td></tr><tr><td style=text-align:left>String</td><td style=text-align:left>File content. Note: If the command uses the RETURNREJECTED parameters, file content (i.e. rejected row numbers) comes in <strong>little-endian</strong> format.</td></tr></tbody></table><h2 id=error-and-notice-message-fields>Error and Notice Message Fields</h2><p>This section describes the fields that may appear in <a href=#errorresponse-e>ErrorResponse</a> and <a href=#noticeresponse-n>NoticeResponse</a> messages. Each field type has a single-byte identification token. Note that any given field type should appear at most once per message.</p><table><thead><tr><th style=text-align:left>Identification token</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>C</td><td style=text-align:left>Code: the SQLSTATE code for the error.</td></tr><tr><td style=text-align:left>D</td><td style=text-align:left>Detail</td></tr><tr><td style=text-align:left>F</td><td style=text-align:left>File: the file name of the source-code location where the error was reported.</td></tr><tr><td style=text-align:left>H</td><td style=text-align:left>Hint: an optional suggestion what to do about the problem. This is intended to differ from Detail in that it offers advice (potentially inappropriate) rather than hard facts. Might run to multiple lines.</td></tr><tr><td style=text-align:left>L</td><td style=text-align:left>Line: the line number of the source-code location where the error was reported.</td></tr><tr><td style=text-align:left>M</td><td style=text-align:left>Message: the primary human-readable error message. Always present.</td></tr><tr><td style=text-align:left>P</td><td style=text-align:left>Position</td></tr><tr><td style=text-align:left>p</td><td style=text-align:left>Internal position</td></tr><tr><td style=text-align:left>q</td><td style=text-align:left>Internal query</td></tr><tr><td style=text-align:left>R</td><td style=text-align:left>Routine: the name of the source-code routine reporting the error.</td></tr><tr><td style=text-align:left>S</td><td style=text-align:left>Severity: the field contents are ERROR, FATAL, or PANIC (in an error message), or WARNING, NOTICE, DEBUG, INFO, or LOG (in a notice message), or a localized translation of one of these. Always present.</td></tr><tr><td style=text-align:left>V</td><td style=text-align:left>Error code</td></tr><tr><td style=text-align:left>W</td><td style=text-align:left>Where: an indication of the context in which the error occurred.</td></tr></tbody></table><h2 id=data-collector-utility>Data Collector utility</h2><p>Data Collector component ClientServerMessages (table V_INTERNAL.dc_client_server_messages) collects a subset of Client-Server Protocol Messages sent between the Front End and Back End. Not all protocol messages are currently logged by the Data Collector. Additionally, some messages has verbose data available.</p><h4 id=logged-frontend-messages>Logged Frontend Messages</h4><table><thead><tr><th style=text-align:left>Message (Character D)</th><th style=text-align:left>Contents logged</th></tr></thead><tbody><tr><td style=text-align:left>Query (&lsquo;Q&rsquo;)</td><td style=text-align:left>Masked Query String</td></tr><tr><td style=text-align:left>Parse (&lsquo;P&rsquo;)</td><td style=text-align:left>statement name:masked query string</td></tr><tr><td style=text-align:left>Bind (&lsquo;B&rsquo;)</td><td style=text-align:left>(empty)</td></tr><tr><td style=text-align:left>Execute (&lsquo;E&rsquo;)</td><td style=text-align:left>portal name</td></tr><tr><td style=text-align:left>Close (&lsquo;C&rsquo;)</td><td style=text-align:left>prepared Statement/portal name</td></tr><tr><td style=text-align:left>Describe (&lsquo;D&rsquo;)</td><td style=text-align:left>prepared Statement/portal name</td></tr><tr><td style=text-align:left>Flush (&lsquo;H&rsquo;)</td><td style=text-align:left>(empty)</td></tr><tr><td style=text-align:left>Sync (&lsquo;S&rsquo;)</td><td style=text-align:left>(empty)</td></tr><tr><td style=text-align:left>Terminate (&lsquo;X&rsquo;)</td><td style=text-align:left>(empty)</td></tr><tr><td style=text-align:left>Startup Request (&rsquo;^&rsquo;)</td><td style=text-align:left>(empty)</td></tr><tr><td style=text-align:left>Mars Request (&rsquo;_&rsquo;)</td><td style=text-align:left>(empty)</td></tr><tr><td style=text-align:left>SSL Request (&rsquo;*&rsquo;)</td><td style=text-align:left>(empty)</td></tr><tr><td style=text-align:left>Load Balance Request (&rsquo;?&rsquo;)</td><td style=text-align:left>(empty)</td></tr><tr><td style=text-align:left>Cancel Request (&rsquo;!&rsquo;)</td><td style=text-align:left>&ldquo;Canceled Session&rdquo; [canceled session ID]</td></tr></tbody></table><h4 id=logged-backend-messages>Logged Backend Messages</h4><table><thead><tr><th style=text-align:left>Message (Character D)</th><th style=text-align:left>Contents logged</th></tr></thead><tbody><tr><td style=text-align:left>Parse Complete (&lsquo;1&rsquo;)</td><td style=text-align:left>(empty)</td></tr><tr><td style=text-align:left>Bind Complete (&lsquo;2&rsquo;)</td><td style=text-align:left>(empty)</td></tr><tr><td style=text-align:left>Close Complete (&lsquo;3&rsquo;)</td><td style=text-align:left>(empty)</td></tr><tr><td style=text-align:left>Portal Suspended (&rsquo;s&rsquo;)</td><td style=text-align:left>(empty)</td></tr><tr><td style=text-align:left>Parameter Description (&rsquo;t&rsquo;)</td><td style=text-align:left>(empty)</td></tr><tr><td style=text-align:left>No Data (&rsquo;n&rsquo;)</td><td style=text-align:left>(empty)</td></tr><tr><td style=text-align:left>Load Balance Response(&lsquo;Y&rsquo;/&lsquo;N&rsquo;)</td><td style=text-align:left>&ldquo;load balance reponse&rdquo; [yes/no]</td></tr><tr><td style=text-align:left>Parameter Status (&lsquo;S&rsquo;)</td><td style=text-align:left>parameter name:parameter value</td></tr><tr><td style=text-align:left>Command Complete (&lsquo;C&rsquo;)</td><td style=text-align:left>tag</td></tr></tbody></table><h3 id=setup-and-usage>Setup and Usage</h3><p>This DC Table is turned on by default. As with other session DC tables, this table contains columns for &rsquo;time&rsquo;, &rsquo;node_name&rsquo;, &lsquo;session_id&rsquo;, &lsquo;user_id&rsquo;, and &lsquo;user_name&rsquo;. The unique columns for this DC table are &lsquo;source&rsquo;, &lsquo;message_type&rsquo;, and &lsquo;contents&rsquo;. The &lsquo;source&rsquo; column describes whether the messages is a Frontend (FE) or Backend (BE) message. &lsquo;message_type&rsquo; provides the character ID that distinguishes the type of message. Additionally, verbose messages will have a &ldquo;+&rdquo; appended to the single character message_type column. For example, the StartupRequest message KV pairs each are represented as a row in the table with the message_type &ldquo;^+&rdquo;. The &lsquo;contents&rsquo; column lists the set of contents being logged, if any, for that message type.</p><h4 id=sample-query>Sample Query</h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>=&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>source</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>message_type</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>contents</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>DC_CLIENT_SERVER_MESSAGES</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><h4 id=clearing-the-dc-table>Clearing the DC Table</h4><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>=&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>SELECT</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>clear_data_collector</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;ClientServerMessages&#39;</span><span style=color:#000;font-weight:700>);</span><span style=color:#f8f8f8;text-decoration:underline>
</span></span></span></code></pre></div><p>Support since Server v12.0SP3</p><h2 id=summary-of-changes-since-protocol-30>Summary of Changes since Protocol 3.0</h2><h3 id=protocol-314>Protocol 3.14</h3><p>Changes include:</p><ul><li>client_os_hostname support. Format change in the <a href=#startuprequest>StartupRequest</a> message. New &lsquo;client_os_hostname&rsquo; parameter. Allow client&rsquo;s OS hostname to be recorded in Sessions Table.</li></ul><p><em>Support since Server v12.0SP4</em></p><h3 id=protocol-313>Protocol 3.13</h3><p>Changes include:</p><ul><li>Postgres compatibility support. Format change in the <a href=#startuprequest>StartupRequest</a> message. New &lsquo;protocol_compat&rsquo; parameter allowing specification of protocol understood by the driver.</li></ul><p><em>Support since Server v12.0SP3</em></p><h3 id=protocol-312-1>Protocol 3.12</h3><p>Changes include:</p><ul><li>Extended Complex Type support. Format change in the <a href=#startuprequest>StartupRequest</a> message. New &lsquo;protocol_features&rsquo; parameter supporting &lsquo;request_complex_types&rsquo;.</li><li>Fall-Through Authentication Filtering: Format change in the <a href=#startuprequest>StartupRequest</a> message. New &lsquo;auth_category&rsquo; parameter.</li><li><a href=#oauth2-authentication>OAuth 2.0 Authentication</a>: add <a href=#authenticationoauth-r>AuthenticationOAuth</a> message.</li></ul><p><em>Support since Server v12.0SP2</em></p><h3 id=protocol-311-1>Protocol 3.11</h3><p>Changes include:</p><ul><li>OAuth 2.0 support: Format change in the
<a href=#startuprequest>StartupRequest</a>
message. New oauth_access_token parameter.</li></ul><p><em>Support since Server v11.1SP1</em></p><h3 id=protocol-310>Protocol 3.10</h3><p>Changes include:</p><ul><li><p>Complex Types support (JDBC only): Format change in the
<a href=#rowdescription-t>RowDescription</a>
message. OID change for 1D Arrays & Sets#copy-operationses include:</p></li><li><p>JDBC Complex Type Metadata support: Server changed the way it
represents some column metadata in v_catalog.types.</p></li></ul><p><em>Support since Server v10.1SP1</em></p><h3 id=protocol-39>Protocol 3.9</h3><p>Changes include:</p><p>JDBC Complex Type Metadata support: Server changed the way it represents some column metadata in v_catalog.types table.
<em>Support since Server v10.1SP1</em></p><h3 id=protocol-38>Protocol 3.8</h3><p>Changes include:</p><ul><li>Native#emptyqueryresponse-i) instead of type CHAR (object ID = 8).</li></ul><p><em>Support since Server v9.0</em></p><h3 id=protocol-37>Protocol 3.7</h3><p>Changes include:</p><ul><li><p>Client Backward compatibility (Server&rsquo;s protocol version is older
than the client&rsquo;s): Format change in the
<a href=#startuprequest>StartupRequest</a>
message.</p></li><li><p>The existing protocol_version parameter is now sent back to the
client in a ParameterStatus message. It contains the protocol version
supported by the server.</p></li></ul><p><em>Support since Server v8.0</em></p><p>This has been verified by reviewing the startup method in the JDBC
driver&rsquo;s protocol stream in the 9.1 source branch. The exact protocol
version each was added is TBD.</p><h3 id=protocol-36>Protocol 3.6</h3><p>Changes include:</p><ul><li>Format change in the
<a href=#startuprequest>StartupRequest</a>
message: New parameters added:<ul><li>mars</li><li>client_os_user_name</li></ul></li><li>New new MARS related messages.</li></ul><p><em>Support since Server v7.2</em></p><h3 id=protocol-35>Protocol 3.5</h3><p>Changes include:</p><ul><li><p>SHA512 authentication support:</p><ul><li>New <a href=#authenticationhashsha512password-r>AuthenticationHashSHA512Password</a>
message</li><li>New <a href=#authenticationhashpassword-r>AuthenticationHashPassword</a>
message</li></ul></li><li><p>Format change in the <a href=#startuprequest>StartupRequest</a> message: New parameters added:</p><ul><li>protocol_version</li><li>binary_data_protocol</li></ul></li><li><p>Server backward compatibility (Client&rsquo;s protocol version is older
than the server&rsquo;s)</p></li></ul><p><em>Support since Server v7.1</em></p><h3 id=protocol-34-and-before>Protocol 3.4 and before</h3><p>These are functional but buggy versions. Changes include:</p><ul><li>Server returns the error code (V) in <a href=#errorresponse-e>ErrorResponse</a>
and <a href=#noticeresponse-n>NoticeResponse</a>
messages.</li><li><a href=Front_End_/_Back_End_Protocol#Connection_load_balancing title=wikilink>Connection Load Balancing</a>
support.</li><li>User-defined Types support: Format change in the <a href=#rowdescription-t>RowDescription</a>
message.</li><li>Support only one portal. The portal name required in some messages is actually ignored by the backend.</li><li>#copy-operationsommandDescription_.27m.27 &ldquo;wikilink&rdquo;) message.</li></ul><blockquote><p>Note: As of protocol version 3.4, the <a href=#startuprequest>StartupRequest</a> message includes the following parameters:</p><ul><li>user</li><li>database</li><li>client_pid</li><li>client_label</li><li>client_type</li><li>client_v#emptyqueryresponse-i v7.0*</li></ul></blockquote></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2023 Open Text Corporation All Rights Reserved</small>
<small class=ml-1><a href=https://policies.google.com/privacy target=_blank rel=noopener>Privacy Policy</a></small></div></div></div></footer></div><script src=../../js/main.min.b6b5dd18889117d69a57d2b6ed518450be5b0d0206550559698a4233c65c109f.js integrity="sha256-trXdGIiRF9aaV9K27VGEUL5bDQIGVQVZaYpCM8ZcEJ8=" crossorigin=anonymous></script>
<script src=../../js/prism.js></script>
<script src=../../js/tabpane-persist.js></script></body></html>